<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAARTHI - One Platform, Every Journey</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #FF6B35;
            --primary-dark: #E85A2B;
            --secondary: #004E89;
            --accent: #00C49A;
            --dark: #1A1A2E;
            --light: #F8F9FA;
            --gradient-1: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            --gradient-2: linear-gradient(135deg, #004E89 0%, #0077B6 100%);
            --gradient-3: linear-gradient(135deg, #00C49A 0%, #00D9A5 100%);
            --shadow: 0 10px 40px rgba(0,0,0,0.1);
            --shadow-hover: 0 20px 60px rgba(0,0,0,0.15);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light);
            color: var(--dark);
            overflow-x: hidden;
        }

        /* Loader */
        .loader-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s, visibility 0.5s;
        }

        .loader-wrapper.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader {
            text-align: center;
        }

        .loader-bus {
            font-size: 4rem;
            color: var(--primary);
            animation: drive 1s ease-in-out infinite;
        }

        @keyframes drive {
            0%, 100% { transform: translateX(-20px); }
            50% { transform: translateX(20px); }
        }

        .loader-text {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 20px;
            letter-spacing: 3px;
        }

        .loader-tagline {
            color: var(--primary);
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 15px 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1001;
            transition: all 0.3s ease;
        }

        .navbar.scrolled {
            background: rgba(255,255,255,0.98);
            box-shadow: var(--shadow);
            padding: 10px 50px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--gradient-1);
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5rem;
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-tagline {
            font-size: 0.65rem;
            color: var(--secondary);
            font-weight: 500;
            letter-spacing: 1px;
        }

        .nav-links {
            display: flex;
            gap: 35px;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            position: relative;
            transition: color 0.3s;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--gradient-1);
            border-radius: 2px;
            transition: width 0.3s;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 12px 28px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-family: 'Poppins', sans-serif;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .btn-primary {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 5px 20px rgba(255,107,53,0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(255,107,53,0.5);
        }

        .btn-secondary {
            background: var(--gradient-2);
            color: white;
        }

        .btn-accent {
            background: var(--gradient-3);
            color: white;
        }

        .mobile-menu {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 26, 46, 0.98);
            z-index: 999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }

        .mobile-nav.show {
            display: flex;
        }

        .mobile-nav a {
            color: white;
            font-size: 1.5rem;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }

        .mobile-nav a:hover {
            color: var(--primary);
        }

        .mobile-nav-close {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 2rem;
            color: white;
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #FF6B35 100%);
            position: relative;
            display: flex;
            align-items: center;
            padding: 120px 50px 80px;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff10" d="M0,96L48,112C96,128,192,160,288,186.7C384,213,480,235,576,213.3C672,192,768,128,864,128C960,128,1056,192,1152,208C1248,224,1344,192,1392,176L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
            background-size: cover;
        }

        .hero-content {
            max-width: 600px;
            color: white;
            position: relative;
            z-index: 2;
        }

        .hero-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 0.9rem;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .hero-title {
            font-size: 4rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 20px;
            text-shadow: 2px 2px 20px rgba(0,0,0,0.2);
        }

        .hero-title span {
            color: #FFD700;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 30px;
            line-height: 1.8;
        }

        .hero-stats {
            display: flex;
            gap: 40px;
            margin-top: 40px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Search Box */
        .search-container {
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            width: 450px;
            z-index: 10;
        }

        .search-box {
            background: white;
            border-radius: 24px;
            padding: 35px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
        }

        .search-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 25px;
            text-align: center;
        }

        .search-title i {
            color: var(--primary);
            margin-right: 10px;
        }

        .input-group {
            margin-bottom: 20px;
            position: relative;
        }

        .input-group label {
            display: block;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 8px;
        }

        .input-wrapper {
            position: relative;
        }

        .input-wrapper i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary);
            font-size: 1.1rem;
        }

        .input-wrapper input,
        .input-wrapper select {
            width: 100%;
            padding: 15px 15px 15px 45px;
            border: 2px solid #E0E0E0;
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
        }

        .input-wrapper input:focus,
        .input-wrapper select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(255,107,53,0.1);
        }

        .swap-btn {
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: var(--gradient-1);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            z-index: 5;
            transition: all 0.3s;
        }

        .swap-btn:hover {
            transform: translateY(-50%) rotate(180deg);
        }

        .date-passengers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .transport-type {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .transport-option {
            flex: 1;
            padding: 12px;
            border: 2px solid #E0E0E0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .transport-option.active {
            border-color: var(--primary);
            background: rgba(255,107,53,0.1);
        }

        .transport-option i {
            font-size: 1.5rem;
            color: var(--primary);
            display: block;
            margin-bottom: 5px;
        }

        .transport-option span {
            font-size: 0.85rem;
            font-weight: 600;
        }

        .search-btn {
            width: 100%;
            padding: 18px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255,107,53,0.4);
        }

        /* Autocomplete Dropdown */
        .autocomplete-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            max-height: 250px;
            overflow-y: auto;
            z-index: 100;
            display: none;
        }

        .autocomplete-dropdown.show {
            display: block;
        }

        .autocomplete-item {
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s;
        }

        .autocomplete-item:hover {
            background: rgba(255,107,53,0.1);
        }

        .autocomplete-item i {
            color: var(--primary);
        }

        .autocomplete-item .city-name {
            font-weight: 500;
        }

        .autocomplete-item .city-type {
            font-size: 0.8rem;
            color: #888;
        }

        /* Floating Elements */
        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .floating-icon {
            position: absolute;
            font-size: 3rem;
            opacity: 0.1;
            color: white;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(10deg); }
        }

        /* Route Results Section */
        .route-results {
            padding: 80px 50px;
            background: white;
            display: none;
        }

        .route-results.show {
            display: block;
        }

        .section-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-badge {
            display: inline-block;
            background: rgba(255,107,53,0.1);
            color: var(--primary);
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .section-title {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        .route-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .route-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            border: 1px solid #f0f0f0;
        }

        .route-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .route-header {
            background: var(--gradient-2);
            padding: 20px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .route-header.bus {
            background: var(--gradient-1);
        }

        .route-header.train {
            background: var(--gradient-2);
        }

        .route-type {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .route-type i {
            font-size: 2rem;
        }

        .route-type-info h3 {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .route-type-info span {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .route-price {
            text-align: right;
        }

        .route-price .price {
            font-size: 1.8rem;
            font-weight: 800;
        }

        .route-price .label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .route-body {
            padding: 25px;
        }

        .route-timeline {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            position: relative;
        }

        .route-point {
            text-align: center;
            z-index: 2;
        }

        .route-point .time {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .route-point .city {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }

        .route-line {
            flex: 1;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            margin: 0 20px;
            position: relative;
        }

        .route-line::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: var(--primary);
            border-radius: 50%;
        }

        .route-line::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: var(--accent);
            border-radius: 50%;
        }

        .route-duration {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--primary);
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }

        .route-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detail-item i {
            width: 35px;
            height: 35px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .detail-item .info {
            font-size: 0.85rem;
        }

        .detail-item .info span {
            display: block;
            color: #888;
            font-size: 0.75rem;
        }

        .route-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .route-actions .btn {
            flex: 1;
            justify-content: center;
        }

        /* Map Section */
        .map-section {
            padding: 80px 50px;
            background: linear-gradient(180deg, #f8f9fa 0%, white 100%);
        }

        .map-container {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            margin-top: 40px;
        }

        .map-wrapper {
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: var(--shadow);
            height: 600px;
            position: relative;
        }

        #leafletMap {
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .map-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .map-control-btn {
            width: 45px;
            height: 45px;
            background: white;
            border: none;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--dark);
            transition: all 0.3s;
        }

        .map-control-btn:hover {
            background: var(--primary);
            color: white;
        }

        .map-info-overlay {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            max-width: 300px;
        }

        .map-info-overlay h4 {
            color: var(--primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .map-info-overlay p {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 5px;
        }

        .map-info-overlay .route-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }

        .map-info-overlay .route-info span {
            font-weight: 600;
            color: var(--dark);
        }

        .tracking-status {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }

        .tracking-status .pulse {
            width: 10px;
            height: 10px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
        }

        .tracking-status span {
            font-size: 0.85rem;
            color: var(--accent);
            font-weight: 600;
        }

        .leaflet-popup-content-wrapper {
            border-radius: 12px !important;
            border: 2px solid var(--primary) !important;
        }

        .leaflet-popup-content {
            margin: 12px 15px !important;
        }

        .leaflet-popup-tip {
            border-top-color: var(--primary) !important;
        }

        .custom-marker-icon {
            background: none;
            border: none;
        }

        .vehicle-marker-icon {
            font-size: 2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* Gujarat Map Specific Styling */
        .gujarat-map-container {
            position: relative;
            border-radius: 24px;
            overflow: hidden;
        }

        .gujarat-label {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--gradient-1);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1rem;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 20px rgba(255,107,53,0.4);
        }

        .gujarat-label i {
            font-size: 1.2rem;
        }

        /* Custom Leaflet Controls Styling */
        .leaflet-control-zoom {
            display: none !important;
        }

        .leaflet-control-attribution {
            background: rgba(255,255,255,0.8) !important;
            padding: 5px 10px !important;
            border-radius: 8px !important;
            font-size: 10px !important;
        }

        /* Gujarat boundary highlight */
        .gujarat-boundary {
            stroke: var(--primary);
            stroke-width: 3;
            fill: rgba(255,107,53,0.05);
        }

        /* City markers styling */
        .city-marker {
            background: var(--gradient-1);
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }

        .city-label {
            background: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            border: 2px solid var(--primary);
            white-space: nowrap;
        }

        /* Route path styling */
        .animated-route {
            stroke-dasharray: 10, 10;
            animation: dashMove 1s linear infinite;
        }

        @keyframes dashMove {
            to {
                stroke-dashoffset: -20;
            }
        }

        /* Map legend */
        .map-legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            font-size: 0.85rem;
        }

        .map-legend h5 {
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .legend-item:last-child {
            margin-bottom: 0;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .legend-dot.start {
            background: var(--primary);
        }

        .legend-dot.end {
            background: var(--accent);
        }

        .legend-dot.vehicle {
            background: var(--secondary);
        }

        .legend-line {
            width: 30px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 2px;
        }

        .vehicle-info-panel {
            background: white;
            border-radius: 24px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .vehicle-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 2px solid #f0f0f0;
        }

        .vehicle-icon-large {
            width: 80px;
            height: 80px;
            background: var(--gradient-1);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
        }

        .vehicle-title h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .vehicle-title span {
            font-size: 0.9rem;
            color: var(--primary);
            font-weight: 600;
        }

        .vehicle-details-list {
            list-style: none;
        }

        .vehicle-detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .vehicle-detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            display: flex;
            align-items: center;
            gap: 12px;
            color: #666;
        }

        .detail-label i {
            width: 35px;
            height: 35px;
            background: rgba(255,107,53,0.1);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .detail-value {
            font-weight: 600;
            color: var(--dark);
        }

        .pilot-profile {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 16px;
            padding: 20px;
            margin-top: 25px;
        }

        .pilot-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .pilot-avatar {
            width: 60px;
            height: 60px;
            background: var(--gradient-2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .pilot-info h4 {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--dark);
        }

        .pilot-info span {
            font-size: 0.85rem;
            color: var(--accent);
            font-weight: 500;
        }

        .pilot-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .pilot-stat {
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: 10px;
        }

        .pilot-stat .value {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .pilot-stat .label {
            font-size: 0.75rem;
            color: #888;
        }

        /* Fare Calculator Section */
        .fare-section {
            padding: 80px 50px;
            background: var(--dark);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .fare-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 60%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,107,53,0.1) 0%, transparent 70%);
        }

        .fare-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .fare-info h2 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 25px;
            line-height: 1.2;
        }

        .fare-info h2 span {
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .fare-info p {
            font-size: 1.1rem;
            opacity: 0.8;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .fare-features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .fare-feature {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .fare-feature i {
            width: 45px;
            height: 45px;
            background: rgba(255,107,53,0.2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .fare-feature span {
            font-weight: 500;
        }

        .fare-calculator {
            background: white;
            border-radius: 24px;
            padding: 40px;
            color: var(--dark);
        }

        .calculator-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 30px;
            text-align: center;
        }

        .calculator-title i {
            color: var(--primary);
            margin-right: 10px;
        }

        .fare-result {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            margin-top: 25px;
        }

        .fare-amount {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
        }

        .fare-breakdown {
            margin-top: 20px;
            text-align: left;
        }

        .fare-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dashed #ddd;
        }

        .fare-item:last-child {
            border-bottom: none;
            font-weight: 700;
            color: var(--primary);
        }

        /* Travel Info Section */
        .travel-info {
            padding: 80px 50px;
            background: white;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .info-card {
            background: white;
            border-radius: 20px;
            padding: 35px;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            border: 1px solid #f0f0f0;
        }

        .info-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .info-icon {
            width: 70px;
            height: 70px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 25px;
        }

        .info-card:nth-child(1) .info-icon {
            background: rgba(255,107,53,0.1);
            color: var(--primary);
        }

        .info-card:nth-child(2) .info-icon {
            background: rgba(0,196,154,0.1);
            color: var(--accent);
        }

        .info-card:nth-child(3) .info-icon {
            background: rgba(0,78,137,0.1);
            color: var(--secondary);
        }

        .info-card:nth-child(4) .info-icon {
            background: rgba(156,39,176,0.1);
            color: #9c27b0;
        }

        .info-card h3 {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
        }

        .info-card p {
            color: #666;
            line-height: 1.7;
            margin-bottom: 20px;
        }

        .info-list {
            list-style: none;
        }

        .info-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
        }

        .info-list li i {
            color: var(--accent);
        }

        /* Booking Section */
        .booking-section {
            padding: 80px 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .booking-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .booking-header h2 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 15px;
        }

        .booking-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .passenger-selector {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            padding: 40px;
            color: var(--dark);
        }

        .selector-title {
            font-size: 1.3rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
            color: var(--dark);
        }

        .passenger-count {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
        }

        .count-btn {
            width: 50px;
            height: 50px;
            border: 2px solid var(--primary);
            background: transparent;
            border-radius: 50%;
            font-size: 1.5rem;
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s;
        }

        .count-btn:hover {
            background: var(--primary);
            color: white;
        }

        .count-display {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary);
            min-width: 80px;
            text-align: center;
        }

        .vehicle-recommendation {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
        }

        .recommended-vehicle {
            margin-bottom: 20px;
        }

        .vehicle-emoji {
            font-size: 5rem;
            display: block;
            margin-bottom: 15px;
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .vehicle-name {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
        }

        .vehicle-desc {
            color: #666;
            font-size: 0.95rem;
        }

        .vehicle-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 30px;
        }

        .vehicle-option {
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .vehicle-option:hover,
        .vehicle-option.active {
            border-color: var(--primary);
            background: rgba(255,107,53,0.05);
        }

        .vehicle-option i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .vehicle-option span {
            display: block;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .vehicle-option small {
            color: #888;
            font-size: 0.8rem;
        }

        .proceed-booking {
            text-align: center;
            margin-top: 30px;
        }

        /* Payment Modal */
        .payment-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }

        .payment-modal.show {
            display: flex;
        }

        .payment-container {
            background: white;
            border-radius: 24px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .payment-header {
            background: var(--gradient-1);
            padding: 30px;
            color: white;
            text-align: center;
            border-radius: 24px 24px 0 0;
        }

        .payment-header h2 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .payment-amount {
            font-size: 2.5rem;
            font-weight: 800;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-modal:hover {
            background: white;
            color: var(--primary);
        }

        .payment-body {
            padding: 30px;
        }

        .payment-methods {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }

        .payment-method {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method:hover,
        .payment-method.active {
            border-color: var(--primary);
            background: rgba(255,107,53,0.05);
        }

        .payment-method input {
            display: none;
        }

        .payment-method-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .payment-method-info h4 {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .payment-method-info span {
            font-size: 0.85rem;
            color: #888;
        }

        .payment-form-group {
            margin-bottom: 20px;
        }

        .payment-form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .payment-form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
        }

        .payment-form-group input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .card-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .pay-now-btn {
            width: 100%;
            padding: 18px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .pay-now-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255,107,53,0.4);
        }

        .secure-badge {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            color: #888;
            font-size: 0.9rem;
        }

        .secure-badge i {
            color: var(--accent);
        }

        /* Payment Success */
        .payment-success {
            text-align: center;
            padding: 50px 30px;
            display: none;
        }

        .payment-success.show {
            display: block;
        }

        .success-icon {
            width: 100px;
            height: 100px;
            background: var(--gradient-3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 3rem;
            color: white;
            animation: scaleIn 0.5s ease;
        }

        @keyframes scaleIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        .success-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .success-message {
            color: #666;
            margin-bottom: 30px;
        }

        .ticket-preview {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .ticket-id {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .ticket-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            text-align: left;
        }

        .ticket-item {
            padding: 10px;
            background: white;
            border-radius: 10px;
        }

        .ticket-item label {
            font-size: 0.75rem;
            color: #888;
            display: block;
        }

        .ticket-item value {
            font-weight: 600;
            color: var(--dark);
        }

        /* Feedback Section */
        .feedback-section {
            padding: 80px 50px;
            background: white;
            position: relative;
        }

        .feedback-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .feedback-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            margin-top: 50px;
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .feedback-visual {
            background: var(--gradient-1);
            padding: 50px;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .feedback-visual h3 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 20px;
        }

        .feedback-visual p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 30px;
            line-height: 1.7;
        }

        .rating-display {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .rating-stars {
            font-size: 2rem;
        }

        .rating-stars i {
            color: #FFD700;
        }

        .rating-text {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .feedback-form {
            padding: 50px;
        }

        .emoji-rating {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .emoji-btn {
            width: 60px;
            height: 60px;
            background: #f0f0f0;
            border: 3px solid transparent;
            border-radius: 50%;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .emoji-btn:hover,
        .emoji-btn.active {
            transform: scale(1.2);
            border-color: var(--primary);
            background: rgba(255,107,53,0.1);
        }

        .feedback-textarea {
            width: 100%;
            height: 150px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            resize: none;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .feedback-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .feedback-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
        }

        .feedback-tag {
            padding: 8px 16px;
            background: #f0f0f0;
            border: 2px solid transparent;
            border-radius: 50px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .feedback-tag:hover,
        .feedback-tag.active {
            border-color: var(--primary);
            background: rgba(255,107,53,0.1);
            color: var(--primary);
        }

        /* Footer */
        .footer {
            background: var(--dark);
            color: white;
            padding: 80px 50px 30px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
            gap: 40px;
            margin-bottom: 50px;
        }

        .footer-brand .logo-text {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .footer-brand .tagline {
            color: var(--primary);
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .footer-brand p {
            color: #aaa;
            line-height: 1.8;
            margin-bottom: 25px;
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-link {
            width: 45px;
            height: 45px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
        }

        .social-link:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .footer-column h4 {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 25px;
            color: white;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #aaa;
            text-decoration: none;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: var(--primary);
            padding-left: 5px;
        }

        .footer-newsletter {
            background: rgba(255,255,255,0.05);
            padding: 25px;
            border-radius: 16px;
        }

        .footer-newsletter h4 {
            margin-bottom: 15px;
        }

        .newsletter-input {
            display: flex;
            gap: 10px;
        }

        .newsletter-input input {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-family: 'Poppins', sans-serif;
        }

        .newsletter-input input::placeholder {
            color: #888;
        }

        .newsletter-input button {
            padding: 12px 20px;
            background: var(--gradient-1);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .newsletter-input button:hover {
            transform: scale(1.05);
        }

        .footer-bottom {
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .footer-bottom p {
            color: #888;
        }

        .footer-badges {
            display: flex;
            gap: 15px;
        }

        .footer-badge {
            padding: 8px 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            font-size: 0.85rem;
            color: #aaa;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-badge i {
            color: var(--accent);
        }

        /* Scroll to top */
        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--gradient-1);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(255,107,53,0.4);
        }

        .scroll-top.show {
            opacity: 1;
            visibility: visible;
        }

        .scroll-top:hover {
            transform: translateY(-5px);
        }

        /* Auth Modal Styles */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .auth-modal.show {
            display: flex;
        }

        .auth-container {
            background: white;
            border-radius: 24px;
            max-width: 480px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.3s ease;
        }

        .auth-header {
            text-align: center;
            padding: 40px 40px 20px;
        }

        .auth-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient-1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5rem;
            color: white;
        }

        .auth-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .auth-header p {
            color: #666;
            font-size: 0.95rem;
        }

        .auth-body {
            padding: 20px 40px 40px;
        }

        .social-login {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 25px;
        }

        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
        }

        .social-btn:hover {
            border-color: var(--primary);
            background: rgba(255,107,53,0.05);
        }

        .social-btn.google i {
            color: #DB4437;
        }

        .social-btn.facebook {
            background: #1877F2;
            color: white;
            border-color: #1877F2;
        }

        .social-btn.facebook:hover {
            background: #166FE5;
        }

        .auth-divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
        }

        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #e0e0e0;
        }

        .auth-divider span {
            padding: 0 15px;
            color: #888;
            font-size: 0.9rem;
        }

        .auth-input-group {
            margin-bottom: 20px;
        }

        .auth-input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 0.9rem;
        }

        .auth-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .auth-input-wrapper i {
            position: absolute;
            left: 15px;
            color: #888;
            font-size: 1.1rem;
        }

        .auth-input-wrapper input {
            width: 100%;
            padding: 15px 15px 15px 45px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
        }

        .auth-input-wrapper input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(255,107,53,0.1);
        }

        .toggle-password {
            position: absolute;
            right: 15px;
            background: none;
            border: none;
            color: #888;
            cursor: pointer;
            font-size: 1.1rem;
        }

        .password-strength {
            margin-top: 8px;
        }

        .strength-bar {
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
        }

        .strength-bar::after {
            content: '';
            display: block;
            height: 100%;
            width: 0;
            transition: all 0.3s;
        }

        .strength-bar.weak::after {
            width: 33%;
            background: #f44336;
        }

        .strength-bar.medium::after {
            width: 66%;
            background: #ff9800;
        }

        .strength-bar.strong::after {
            width: 100%;
            background: #4caf50;
        }

        .strength-text {
            font-size: 0.75rem;
            color: #888;
        }

        .auth-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .auth-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .remember-me input {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        .forgot-password {
            color: var(--primary);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .auth-submit-btn {
            width: 100%;
            padding: 16px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-family: 'Poppins', sans-serif;
        }

        .auth-submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255,107,53,0.4);
        }

        .auth-switch {
            text-align: center;
            margin-top: 25px;
            color: #666;
        }

        .auth-switch a {
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
        }

        .otp-inputs {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .otp-input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            transition: all 0.3s;
        }

        .otp-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .otp-timer {
            text-align: center;
            color: #888;
            margin-bottom: 20px;
        }

        /* Bus Booking Modal Styles */
        .booking-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: flex-start;
            z-index: 2000;
            padding: 20px;
            overflow-y: auto;
        }

        .booking-modal.show {
            display: flex;
        }

        .booking-container {
            background: white;
            border-radius: 24px;
            max-width: 1200px;
            width: 100%;
            margin: 20px auto;
            position: relative;
            animation: slideUp 0.3s ease;
        }

        .booking-progress {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 24px 24px 0 0;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            opacity: 0.5;
            transition: all 0.3s;
        }

        .progress-step.active {
            opacity: 1;
        }

        .progress-step.completed {
            opacity: 1;
        }

        .progress-step.completed .step-icon {
            background: var(--accent);
        }

        .step-icon {
            width: 50px;
            height: 50px;
            background: #ccc;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .progress-step.active .step-icon {
            background: var(--gradient-1);
            box-shadow: 0 5px 20px rgba(255,107,53,0.4);
        }

        .progress-step span {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--dark);
        }

        .progress-line {
            width: 80px;
            height: 3px;
            background: #ddd;
            margin: 0 15px;
            margin-bottom: 30px;
        }

        .booking-step {
            padding: 30px;
        }

        .step-header {
            margin-bottom: 30px;
        }

        .step-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .step-header h2 i {
            color: var(--primary);
        }

        .route-summary {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.1rem;
            color: #666;
        }

        .route-summary i {
            color: var(--primary);
        }

        .booking-date {
            background: rgba(255,107,53,0.1);
            color: var(--primary);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .bus-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 25px;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            background: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
        }

        .filter-btn:hover,
        .filter-btn.active {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .bus-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-height: 500px;
            overflow-y: auto;
        }

        .bus-card {
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }

        .bus-card:hover {
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .bus-card.selected {
            border-color: var(--primary);
            background: rgba(255,107,53,0.05);
        }

        .bus-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa, #fff);
        }

        .bus-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .bus-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-1);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .bus-details h3 {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark);
        }

        .bus-type-badge {
            display: inline-block;
            background: rgba(0,196,154,0.1);
            color: var(--accent);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 5px;
        }

        .bus-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        .bus-rating i {
            color: #FFD700;
        }

        .bus-price {
            text-align: right;
        }

        .bus-price .price {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary);
        }

        .bus-price .per-seat {
            font-size: 0.85rem;
            color: #888;
        }

        .bus-card-body {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            padding: 20px;
            gap: 20px;
            border-top: 1px solid #f0f0f0;
        }

        .bus-timing {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .time-point {
            text-align: center;
        }

        .time-point .time {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
        }

        .time-point .location {
            font-size: 0.85rem;
            color: #888;
        }

        .time-duration {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #888;
            font-size: 0.85rem;
        }

        .time-duration .line {
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            margin: 5px 0;
        }

        .bus-amenities {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
        }

        .amenity {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            color: #666;
            font-size: 0.8rem;
        }

        .amenity i {
            font-size: 1.2rem;
            color: var(--primary);
        }

        .bus-seats-info {
            text-align: right;
        }

        .seats-available {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--accent);
        }

        .bus-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #f8f9fa;
        }

        .cancellation-policy {
            font-size: 0.85rem;
            color: #888;
        }

        .cancellation-policy i {
            color: var(--accent);
            margin-right: 5px;
        }

        .select-bus-btn {
            padding: 12px 30px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
        }

        .select-bus-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255,107,53,0.4);
        }

        /* Seat Selection Styles */
        .seat-selection-container {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
        }

        .seat-layout {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 25px;
        }

        .bus-front {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: var(--dark);
            border-radius: 15px 15px 0 0;
            color: white;
            margin-bottom: 20px;
        }

        .driver-seat {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .driver-seat i {
            font-size: 1.5rem;
        }

        .seat-legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 25px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }

        .seat-demo {
            width: 25px;
            height: 25px;
            border-radius: 6px;
        }

        .seat-demo.available {
            background: #e0e0e0;
            border: 2px solid #ccc;
        }

        .seat-demo.selected {
            background: var(--primary);
            border: 2px solid var(--primary-dark);
        }

        .seat-demo.booked {
            background: #999;
        }

        .seat-demo.ladies {
            background: #E91E63;
        }

        .deck-label {
            text-align: center;
            font-weight: 600;
            color: var(--dark);
            margin: 20px 0 10px;
            padding: 10px;
            background: white;
            border-radius: 10px;
        }

        .seat-deck {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }

        .seat {
            width: 45px;
            height: 45px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .seat.available {
            background: #e8f5e9;
            border-color: #a5d6a7;
            color: #2e7d32;
        }

        .seat.available:hover {
            background: #c8e6c9;
            transform: scale(1.1);
        }

        .seat.selected {
            background: var(--primary);
            border-color: var(--primary-dark);
            color: white;
            transform: scale(1.1);
        }

        .seat.booked {
            background: #e0e0e0;
            color: #999;
            cursor: not-allowed;
        }

        .seat.ladies {
            background: #fce4ec;
            border-color: #f48fb1;
            color: #c2185b;
        }

        .seat.aisle {
            visibility: hidden;
        }

        .seat-summary {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--shadow);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .seat-summary h3 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            font-size: 0.95rem;
        }

        .summary-item.total {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .summary-divider {
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            margin: 15px 0;
        }

        .proceed-btn {
            width: 100%;
            padding: 16px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            font-family: 'Poppins', sans-serif;
        }

        .proceed-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .proceed-btn:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255,107,53,0.4);
        }

        /* Passenger Forms */
        .passenger-forms {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-bottom: 30px;
        }

        .passenger-form-card {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 25px;
        }

        .passenger-form-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .passenger-form-header h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .seat-badge {
            background: var(--primary);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        .passenger-form-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .contact-details {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 25px;
        }

        .contact-details h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .contact-details h3 i {
            color: var(--primary);
        }

        .contact-details > p {
            color: #888;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .contact-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .step-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #f0f0f0;
        }

        .back-btn {
            padding: 14px 30px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Poppins', sans-serif;
        }

        .back-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Payment Section Styles */
        .payment-container-inner {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
        }

        .payment-summary-card {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 25px;
            height: fit-content;
        }

        .payment-summary-card h3 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .summary-route {
            padding: 20px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .route-point {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
        }

        .route-point i {
            color: var(--primary);
        }

        .route-line-vertical {
            width: 2px;
            height: 30px;
            background: linear-gradient(180deg, var(--primary), var(--accent));
            margin-left: 8px;
        }

        .summary-details {
            padding: 15px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 0.9rem;
        }

        .price-breakdown {
            padding: 15px 0;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 0.9rem;
        }

        .price-row.discount {
            color: var(--accent);
        }

        .price-row.total {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
            padding-top: 15px;
            border-top: 2px dashed #ddd;
            margin-top: 10px;
        }

        .coupon-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .coupon-input {
            display: flex;
            gap: 10px;
        }

        .coupon-input input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: 'Poppins', sans-serif;
        }

        .coupon-input button {
            padding: 12px 20px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
        }

        .available-coupons {
            margin-top: 10px;
            font-size: 0.85rem;
            color: #888;
        }

        .coupon-tag {
            background: rgba(255,107,53,0.1);
            color: var(--primary);
            border: 1px dashed var(--primary);
            padding: 3px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-left: 5px;
        }

        .payment-methods-section h3 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .payment-section {
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .payment-section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-section-header:hover {
            background: #f8f9fa;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }

        .section-title i {
            color: var(--primary);
            font-size: 1.2rem;
        }

        .emi-badge {
            background: var(--accent);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-left: 10px;
        }

        .payment-section-body {
            padding: 20px;
            border-top: 1px solid #e0e0e0;
            background: #fafafa;
        }

        .upi-apps {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .upi-app {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upi-app:hover,
        .upi-app.selected {
            border-color: var(--primary);
            background: rgba(255,107,53,0.05);
        }

        .upi-app img {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }

        .upi-app span {
            font-size: 0.85rem;
            font-weight: 500;
        }

        .upi-id-input {
            margin-top: 15px;
        }

        .upi-id-input label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #666;
        }

        .verify-btn {
            position: absolute;
            right: 10px;
            padding: 8px 15px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }

        .card-brands {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .card-brands img {
            height: 30px;
            object-fit: contain;
        }

        .card-form {
            background: white;
            padding: 20px;
            border-radius: 12px;
        }

        .save-card {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .popular-banks {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 12px;
            margin-bottom: 15px;
        }

        .bank-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 15px 10px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .bank-btn:hover,
        .bank-btn.selected {
            border-color: var(--primary);
        }

        .bank-btn img {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }

        .bank-btn span {
            font-size: 0.8rem;
            font-weight: 500;
        }

        .other-banks select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: 'Poppins', sans-serif;
        }

        .wallet-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .wallet-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 20px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .wallet-btn:hover,
        .wallet-btn.selected {
            border-color: var(--primary);
        }

        .wallet-btn img {
            width: 50px;
            height: 30px;
            object-fit: contain;
        }

        .emi-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .emi-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .emi-option:hover,
        .emi-option input:checked + .emi-details {
            border-color: var(--primary);
        }

        .emi-details {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }

        .emi-months {
            font-weight: 600;
        }

        .emi-amount {
            font-weight: 700;
            color: var(--primary);
        }

        .emi-interest {
            color: var(--accent);
            font-size: 0.85rem;
        }

        .paylater-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .paylater-btn {
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .paylater-btn:hover {
            border-color: var(--primary);
        }

        .paylater-name {
            display: block;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .paylater-desc {
            font-size: 0.85rem;
            color: #888;
        }

        .payment-security {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid #e0e0e0;
        }

        .security-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #888;
            font-size: 0.85rem;
        }

        .security-item i {
            color: var(--accent);
        }

        /* Success Screen */
        .success-container {
            text-align: center;
            padding: 40px;
        }

        .success-animation {
            margin-bottom: 30px;
        }

        .success-checkmark {
            width: 100px;
            height: 100px;
            background: var(--gradient-3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            font-size: 3rem;
            color: white;
            animation: scaleIn 0.5s ease;
        }

        .success-container h2 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .success-container > p {
            color: #888;
            margin-bottom: 30px;
        }

        .ticket-card {
            max-width: 500px;
            margin: 0 auto 30px;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .ticket-header {
            background: var(--gradient-1);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }

        .ticket-logo {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .ticket-qr {
            font-size: 2.5rem;
        }

        .ticket-body {
            padding: 25px;
        }

        .ticket-route {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .ticket-city {
            text-align: center;
        }

        .city-code {
            display: block;
            font-size: 2rem;
            font-weight: 800;
            color: var(--dark);
        }

        .city-name {
            font-size: 0.9rem;
            color: #888;
        }

        .ticket-journey {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 0 20px;
        }

        .ticket-journey i {
            color: var(--primary);
            font-size: 1.5rem;
        }

        .journey-line {
            flex: 1;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }

        .ticket-info-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .ticket-info-item {
            text-align: left;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .ticket-info-item label {
            display: block;
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 5px;
        }

        .ticket-info-item value {
            font-weight: 600;
            color: var(--dark);
        }

        .ticket-footer {
            padding: 15px;
            background: #f8f9fa;
            text-align: center;
            font-size: 0.85rem;
            color: #888;
        }

        .success-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 100px;
            right: 30px;
            z-index: 3000;
        }

        .toast {
            background: white;
            padding: 20px 25px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            transform: translateX(150%);
            transition: all 0.3s;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .toast.success .toast-icon {
            background: rgba(0,196,154,0.2);
            color: var(--accent);
        }

        .toast.error .toast-icon {
            background: rgba(244,67,54,0.2);
            color: #f44336;
        }

        .toast.info .toast-icon {
            background: rgba(0,78,137,0.2);
            color: var(--secondary);
        }

        .toast-content h4 {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .toast-content p {
            font-size: 0.85rem;
            color: #666;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .search-container {
                position: relative;
                right: auto;
                top: auto;
                transform: none;
                width: 100%;
                margin-top: 50px;
            }

            .hero {
                flex-direction: column;
                text-align: center;
            }

            .hero-stats {
                justify-content: center;
            }
        }

        @media (max-width: 992px) {
            .navbar {
                padding: 15px 30px;
            }

            .nav-links {
                display: none;
            }

            .nav-buttons {
                display: none;
            }

            .mobile-menu {
                display: block;
            }

            .hero-title {
                font-size: 3rem;
            }

            .map-container {
                grid-template-columns: 1fr;
            }

            .fare-container {
                grid-template-columns: 1fr;
            }

            .feedback-wrapper {
                grid-template-columns: 1fr;
            }

            .footer-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            .hero {
                padding: 100px 20px 50px;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .route-grid {
                grid-template-columns: 1fr;
            }

            .vehicle-options {
                grid-template-columns: repeat(2, 1fr);
            }

            .footer-grid {
                grid-template-columns: 1fr;
            }

            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }

            .map-section,
            .fare-section,
            .travel-info,
            .booking-section,
            .feedback-section {
                padding: 60px 20px;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }

            .search-box {
                padding: 25px;
            }

            .passenger-count {
                gap: 15px;
            }

            .count-display {
                font-size: 3rem;
            }

            .hero-stats {
                flex-direction: column;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Loader -->
    <div class="loader-wrapper" id="loader">
        <div class="loader">
            <div class="loader-bus"></div>
            <div class="loader-text">SAARTHI</div>
            <div class="loader-tagline">ONE PLATFORM, EVERY JOURNEY</div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Mobile Navigation -->
    <div class="mobile-nav" id="mobileNav">
        <div class="mobile-nav-close" onclick="closeMobileNav()">
            <i class="fas fa-times"></i>
        </div>
        <a href="#home" onclick="closeMobileNav()">Home</a>
        <a href="#routes" onclick="closeMobileNav()">Routes</a>
        <a href="#map" onclick="closeMobileNav()">Live Map</a>
        <a href="#fare" onclick="closeMobileNav()">Fare Calculator</a>
        <a href="#booking" onclick="closeMobileNav()">Book Now</a>
        <a href="#contact" onclick="closeMobileNav()">Contact</a>
    </div>

    <!-- Navbar -->
    <nav class="navbar" id="navbar">
        <a href="#" class="logo">
            <div class="logo-icon">
                <i class="fas fa-route"></i>
            </div>
            <div>
                <div class="logo-text">SAARTHI</div>
                <div class="logo-tagline">ONE PLATFORM, EVERY JOURNEY</div>
            </div>
        </a>
        <ul class="nav-links">
            <li><a href="#home" >Home</a></li>
            <li><a href="#routes">Routes</a></li>
            <li><a href="#map">Live Map</a></li>
            <li><a href="#fare">Fare Calculator</a></li>
            <li><a href="#booking">Book Now</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        <div class="nav-buttons">
            <a href="#" class="btn btn-outline">Login</a>
            <a href="#" class="btn btn-primary">Sign Up</a>
        </div>
        <div class="mobile-menu" id="mobileMenu" onclick="openMobileNav()">
            <i class="fas fa-bars"></i>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="floating-elements">
            <i class="fas fa-bus floating-icon" style="top: 20%; left: 10%;"></i>
            <i class="fas fa-train floating-icon" style="top: 60%; left: 5%; animation-delay: 1s;"></i>
            <i class="fas fa-car floating-icon" style="top: 30%; left: 25%; animation-delay: 2s;"></i>
            <i class="fas fa-motorcycle floating-icon" style="top: 70%; left: 20%; animation-delay: 0.5s;"></i>
        </div>

        <div class="hero-content">
            <span class="hero-badge"> #1 Transport Platform in Gujarat</span>
            <h1 class="hero-title">
                Your Journey, <span>Our Commitment</span>
            </h1>
            <p class="hero-subtitle">
                Experience seamless travel across Gujarat with real-time tracking, 
                smart booking, and the best routes for buses, trains, and more. 
                Travel smarter, not harder.
            </p>
            <div class="hero-stats">
                <div class="stat-item">
                    <div class="stat-number">150+</div>
                    <div class="stat-label">Cities Covered</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">500+</div>
                    <div class="stat-label">Daily Routes</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">1M+</div>
                    <div class="stat-label">Happy Travelers</div>
                </div>
            </div>
        </div>

        <div class="search-container">
            <div class="search-box">
                <h3 class="search-title">
                    <i class="fas fa-search-location"></i>
                    Plan Your Journey
                </h3>

                <div class="transport-type">
                    <div class="transport-option active" data-type="bus" onclick="selectTransport(this)">
                        <i class="fas fa-bus"></i>
                        <span>Bus</span>
                    </div>
                    <div class="transport-option" data-type="train" onclick="selectTransport(this)">
                        <i class="fas fa-train"></i>
                        <span>Train</span>
                    </div>
                    <div class="transport-option" data-type="all" onclick="selectTransport(this)">
                        <i class="fas fa-route"></i>
                        <span>All</span>
                    </div>
                </div>

                <div class="input-group" style="position: relative;">
                    <label>Departure City</label>
                    <div class="input-wrapper">
                        <i class="fas fa-circle" style="color: var(--accent); font-size: 0.8rem;"></i>
                        <input type="text" id="departureInput" placeholder="Enter departure city" autocomplete="off">
                    </div>
                    <div class="autocomplete-dropdown" id="departureDropdown"></div>
                    <button class="swap-btn" id="swapBtn" onclick="swapCities()">
                        <i class="fas fa-exchange-alt fa-rotate-90"></i>
                    </button>
                </div>

                <div class="input-group" style="position: relative;">
                    <label>Arrival City</label>
                    <div class="input-wrapper">
                        <i class="fas fa-map-marker-alt"></i>
                        <input type="text" id="arrivalInput" placeholder="Enter destination city" autocomplete="off">
                    </div>
                    <div class="autocomplete-dropdown" id="arrivalDropdown"></div>
                </div>

                <div class="date-passengers">
                    <div class="input-group">
                        <label>Travel Date</label>
                        <div class="input-wrapper">
                            <i class="fas fa-calendar-alt"></i>
                            <input type="date" id="travelDate">
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Passengers</label>
                        <div class="input-wrapper">
                            <i class="fas fa-users"></i>
                            <select id="passengerCount">
                                <option value="1">1 Passenger</option>
                                <option value="2">2 Passengers</option>
                                <option value="3">3 Passengers</option>
                                <option value="4">4 Passengers</option>
                                <option value="5">5+ Passengers</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button class="search-btn" id="searchBtn" onclick="searchRoutes()">
                    <i class="fas fa-search"></i>
                    Search Routes
                </button>
            </div>
        </div>
    </section>

    <!-- Route Results Section -->
    <section class="route-results" id="routes">
        <div class="section-header">
            <span class="section-badge"> Available Routes</span>
            <h2 class="section-title">Best Routes for Your Journey</h2>
            <p class="section-subtitle">Choose from multiple options based on time, price, and comfort</p>
        </div>

        <div class="route-grid" id="routeGrid">
            <!-- Routes will be populated by JavaScript -->
        </div>
    </section>

    <!-- Map Section -->
    <section class="map-section" id="map">
        <div class="section-header">
            <span class="section-badge"> Live Tracking</span>
            <h2 class="section-title">Track Your Route in Real-Time</h2>
            <p class="section-subtitle">Watch your vehicle move along the route with accurate tracking</p>
        </div>

        <div class="map-container">
            <div class="map-wrapper gujarat-map-container">
                <div class="gujarat-label">
                    <i class="fas fa-map-marked-alt"></i>
                    Gujarat, India
                </div>
                <div id="leafletMap"></div>
                <div class="map-controls">
                    <button class="map-control-btn" onclick="mapZoomIn()" title="Zoom In"><i class="fas fa-plus"></i></button>
                    <button class="map-control-btn" onclick="mapZoomOut()" title="Zoom Out"><i class="fas fa-minus"></i></button>
                    <button class="map-control-btn" onclick="mapFitRoute()" title="Fit Route"><i class="fas fa-expand"></i></button>
                    <button class="map-control-btn" onclick="toggleMapLayer()" title="Change Map Style"><i class="fas fa-layer-group"></i></button>
                    <button class="map-control-btn" onclick="centerOnVehicle()" title="Track Vehicle"><i class="fas fa-crosshairs"></i></button>
                    <button class="map-control-btn" onclick="toggleTracking()" title="Toggle Live Tracking" id="trackingBtn"><i class="fas fa-play"></i></button>
                    <button class="map-control-btn" onclick="showAllCities()" title="Show All Cities"><i class="fas fa-city"></i></button>
                    <button class="map-control-btn" onclick="resetToGujarat()" title="Reset View"><i class="fas fa-undo"></i></button>
                </div>
                <div class="map-info-overlay" id="mapInfoOverlay">
                    <h4><i class="fas fa-route"></i> Route Information</h4>
                    <p><strong>From:</strong> <span id="mapFromCity">Ahmedabad</span></p>
                    <p><strong>To:</strong> <span id="mapToCity">Surat</span></p>
                    <p><strong>Distance:</strong> <span id="mapDistance">~265 km</span></p>
                    <p><strong>Est. Time:</strong> <span id="mapDuration">~4 hrs</span></p>
                    <div class="tracking-status" id="trackingStatus">
                        <div class="pulse"></div>
                        <span>Live Tracking Active</span>
                    </div>
                </div>
                <div class="map-legend">
                    <h5><i class="fas fa-info-circle"></i> Legend</h5>
                    <div class="legend-item">
                        <div class="legend-dot start"></div>
                        <span>Departure Point</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot end"></div>
                        <span>Destination</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot vehicle"></div>
                        <span>Live Vehicle</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line"></div>
                        <span>Route Path</span>
                    </div>
                </div>
            </div>

            <div class="vehicle-info-panel">
                <div class="vehicle-header">
                    <div class="vehicle-icon-large" id="vehicleIconLarge">
                        <i class="fas fa-bus"></i>
                    </div>
                    <div class="vehicle-title">
                        <h2 id="vehicleName">Gujarat Express</h2>
                        <span id="vehicleNumber">GJ-01-AB-1234</span>
                    </div>
                </div>

                <ul class="vehicle-details-list">
                    <li class="vehicle-detail-item">
                        <span class="detail-label">
                            <i class="fas fa-hashtag"></i>
                            Vehicle Number
                        </span>
                        <span class="detail-value" id="detailVehicleNum">GJ-01-AB-1234</span>
                    </li>
                    <li class="vehicle-detail-item">
                        <span class="detail-label">
                            <i class="fas fa-bus-alt"></i>
                            Vehicle Type
                        </span>
                        <span class="detail-value" id="detailVehicleType">AC Sleeper</span>
                    </li>
                    <li class="vehicle-detail-item">
                        <span class="detail-label">
                            <i class="fas fa-chair"></i>
                            Total Seats
                        </span>
                        <span class="detail-value" id="detailSeats">40 Seats</span>
                    </li>
                    <li class="vehicle-detail-item">
                        <span class="detail-label">
                            <i class="fas fa-check-circle"></i>
                            Available
                        </span>
                        <span class="detail-value" id="detailAvailable">28 Seats</span>
                    </li>
                    <li class="vehicle-detail-item">
                        <span class="detail-label">
                            <i class="fas fa-star"></i>
                            Rating
                        </span>
                        <span class="detail-value" id="detailRating">4.8 </span>
                    </li>
                </ul>

                <div class="pilot-profile">
                    <div class="pilot-header">
                        <div class="pilot-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="pilot-info">
                            <h4 id="pilotName">Ramesh Patel</h4>
                            <span> Verified Driver</span>
                        </div>
                    </div>
                    <div class="pilot-stats">
                        <div class="pilot-stat">
                            <div class="value" id="pilotExp">15</div>
                            <div class="label">Years Exp.</div>
                        </div>
                        <div class="pilot-stat">
                            <div class="value" id="pilotAge">45</div>
                            <div class="label">Age</div>
                        </div>
                        <div class="pilot-stat">
                            <div class="value" id="pilotTrips">5K+</div>
                            <div class="label">Trips</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Fare Calculator Section -->
    <section class="fare-section" id="fare">
        <div class="fare-container">
            <div class="fare-info">
                <h2>Calculate Your <span>Travel Fare</span> Instantly</h2>
                <p>
                    Get accurate fare estimates before you book. Our transparent pricing 
                    ensures you know exactly what you're paying for - no hidden charges, 
                    no surprises.
                </p>
                <div class="fare-features">
                    <div class="fare-feature">
                        <i class="fas fa-shield-alt"></i>
                        <span>No Hidden Charges</span>
                    </div>
                    <div class="fare-feature">
                        <i class="fas fa-percentage"></i>
                        <span>Best Price Guarantee</span>
                    </div>
                    <div class="fare-feature">
                        <i class="fas fa-ticket-alt"></i>
                        <span>Instant Confirmation</span>
                    </div>
                    <div class="fare-feature">
                        <i class="fas fa-undo"></i>
                        <span>Easy Refunds</span>
                    </div>
                </div>
            </div>

            <div class="fare-calculator">
                <h3 class="calculator-title">
                    <i class="fas fa-calculator"></i>
                    Fare Calculator
                </h3>

                <div class="input-group">
                    <label>From</label>
                    <div class="input-wrapper">
                        <i class="fas fa-map-pin"></i>
                        <input type="text" id="fareFrom" placeholder="Departure city">
                    </div>
                </div>

                <div class="input-group">
                    <label>To</label>
                    <div class="input-wrapper">
                        <i class="fas fa-map-marker-alt"></i>
                        <input type="text" id="fareTo" placeholder="Destination city">
                    </div>
                </div>

                <div class="input-group">
                    <label>Transport Type</label>
                    <div class="input-wrapper">
                        <i class="fas fa-bus"></i>
                        <select id="fareTransport">
                            <option value="bus-regular">Bus - Regular</option>
                            <option value="bus-ac">Bus - AC</option>
                            <option value="bus-sleeper">Bus - Sleeper</option>
                            <option value="train-general">Train - General</option>
                            <option value="train-sleeper">Train - Sleeper</option>
                            <option value="train-ac">Train - AC</option>
                        </select>
                    </div>
                </div>

                <button class="search-btn" onclick="calculateFare()">
                    <i class="fas fa-calculator"></i>
                    Calculate Fare
                </button>

                <div class="fare-result" id="fareResult" style="display: none;">
                    <div class="fare-amount" id="fareAmount">0</div>
                    <div class="fare-breakdown">
                        <div class="fare-item">
                            <span>Base Fare</span>
                            <span id="baseFare">0</span>
                        </div>
                        <div class="fare-item">
                            <span>GST (5%)</span>
                            <span id="gstAmount">0</span>
                        </div>
                        <div class="fare-item">
                            <span>Service Fee</span>
                            <span id="serviceFee">20</span>
                        </div>
                        <div class="fare-item">
                            <span><strong>Total</strong></span>
                            <span id="totalFare"><strong>0</strong></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Travel Info Section -->
    <section class="travel-info" id="info">
        <div class="section-header">
            <span class="section-badge"> Travel Guide</span>
            <h2 class="section-title">Essential Travel Information</h2>
            <p class="section-subtitle">Everything you need to know for a safe and comfortable journey</p>
        </div>

        <div class="info-grid">
            <div class="info-card">
                <div class="info-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <h3>Travel Time Guide</h3>
                <p>Plan your journey with accurate time estimates</p>
                <ul class="info-list">
                    <li><i class="fas fa-check"></i> Ahmedabad to Surat: ~4 hours</li>
                    <li><i class="fas fa-check"></i> Rajkot to Vadodara: ~3.5 hours</li>
                    <li><i class="fas fa-check"></i> Gandhinagar to Bhuj: ~6 hours</li>
                    <li><i class="fas fa-check"></i> Jamnagar to Porbandar: ~2 hours</li>
                </ul>
            </div>

            <div class="info-card">
                <div class="info-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>Safety Measures</h3>
                <p>Your safety is our top priority</p>
                <ul class="info-list">
                    <li><i class="fas fa-check"></i> GPS tracked vehicles</li>
                    <li><i class="fas fa-check"></i> Verified drivers with background check</li>
                    <li><i class="fas fa-check"></i> Emergency SOS button</li>
                    <li><i class="fas fa-check"></i> 24/7 customer support</li>
                </ul>
            </div>

            <div class="info-card">
                <div class="info-icon">
                    <i class="fas fa-suitcase"></i>
                </div>
                <h3>Baggage Policy</h3>
                <p>Know what you can carry</p>
                <ul class="info-list">
                    <li><i class="fas fa-check"></i> 15kg luggage included</li>
                    <li><i class="fas fa-check"></i> Hand baggage: 7kg</li>
                    <li><i class="fas fa-check"></i> Extra luggage: 50/kg</li>
                    <li><i class="fas fa-check"></i> Fragile items handled carefully</li>
                </ul>
            </div>

            <div class="info-card">
                <div class="info-icon">
                    <i class="fas fa-headset"></i>
                </div>
                <h3>Customer Support</h3>
                <p>We're here to help you</p>
                <ul class="info-list">
                    <li><i class="fas fa-check"></i> 24/7 helpline: 1800-XXX-XXXX</li>
                    <li><i class="fas fa-check"></i> WhatsApp support available</li>
                    <li><i class="fas fa-check"></i> Live chat on website</li>
                    <li><i class="fas fa-check"></i> Email response in 2 hours</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Booking Section -->
    <section class="booking-section" id="booking">
        <div class="booking-header">
            <h2>Smart Booking System</h2>
            <p>We recommend the best vehicle based on your group size</p>
        </div>

        <div class="passenger-selector">
            <h3 class="selector-title">How many travelers?</h3>

            <div class="passenger-count">
                <button class="count-btn" onclick="updatePassengers(-1)">-</button>
                <div class="count-display" id="passengerDisplay">1</div>
                <button class="count-btn" onclick="updatePassengers(1)">+</button>
            </div>

            <div class="vehicle-recommendation" id="vehicleRecommendation">
                <div class="recommended-vehicle">
                    <span class="vehicle-emoji" id="recommendedEmoji"></span>
                    <div class="vehicle-name" id="recommendedName">Walking</div>
                    <div class="vehicle-desc" id="recommendedDesc">Best for solo travelers within the city</div>
                </div>
            </div>

            <div class="vehicle-options">
                <div class="vehicle-option active" data-passengers="1-2" onclick="selectVehicle(this, 'bike')">
                    <i class="fas fa-motorcycle"></i>
                    <span>Bike</span>
                    <small>1-2 persons</small>
                </div>
                <div class="vehicle-option" data-passengers="3" onclick="selectVehicle(this, 'auto')">
                    <i class="fas fa-shuttle-van"></i>
                    <span>Auto</span>
                    <small>3 persons</small>
                </div>
                <div class="vehicle-option" data-passengers="4-5" onclick="selectVehicle(this, 'car')">
                    <i class="fas fa-car"></i>
                    <span>Car</span>
                    <small>4-5 persons</small>
                </div>
                <div class="vehicle-option" data-passengers="6+" onclick="selectVehicle(this, 'van')">
                    <i class="fas fa-bus"></i>
                    <span>Van/Bus</span>
                    <small>6+ persons</small>
                </div>
            </div>

            <div class="proceed-booking">
                <button class="btn btn-primary" onclick="openPaymentModal()" style="padding: 18px 50px; font-size: 1.1rem;">
                    <i class="fas fa-ticket-alt"></i>
                    Proceed to Book
                </button>
            </div>
        </div>
    </section>

    <!-- Auth Modal - Sign In / Sign Up -->
    <div class="auth-modal" id="authModal">
        <div class="auth-container">
            <button class="close-modal" onclick="closeAuthModal()">
                <i class="fas fa-times"></i>
            </button>

            <!-- Sign In Form -->
            <div class="auth-form" id="signInForm">
                <div class="auth-header">
                    <div class="auth-icon">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <h2>Welcome Back!</h2>
                    <p>Sign in to continue your journey</p>
                </div>

                <div class="auth-body">
                    <div class="social-login">
                        <button class="social-btn google" onclick="socialLogin('google')">
                            <i class="fab fa-google"></i>
                            Continue with Google
                        </button>
                        <button class="social-btn facebook" onclick="socialLogin('facebook')">
                            <i class="fab fa-facebook-f"></i>
                            Continue with Facebook
                        </button>
                    </div>

                    <div class="auth-divider">
                        <span>or sign in with email</span>
                    </div>

                    <form onsubmit="handleSignIn(event)">
                        <div class="auth-input-group">
                            <label>Email Address</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-envelope"></i>
                                <input type="email" id="signInEmail" placeholder="Enter your email" required>
                            </div>
                        </div>

                        <div class="auth-input-group">
                            <label>Password</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="signInPassword" placeholder="Enter your password" required>
                                <button type="button" class="toggle-password" onclick="togglePassword('signInPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="auth-options">
                            <label class="remember-me">
                                <input type="checkbox" id="rememberMe">
                                <span>Remember me</span>
                            </label>
                            <a href="#" class="forgot-password" onclick="showForgotPassword()">Forgot Password?</a>
                        </div>

                        <button type="submit" class="auth-submit-btn">
                            <i class="fas fa-sign-in-alt"></i>
                            Sign In
                        </button>
                    </form>

                    <div class="auth-switch">
                        Don't have an account? 
                        <a href="#" onclick="showSignUp()">Sign Up</a>
                    </div>
                </div>
            </div>

            <!-- Sign Up Form -->
            <div class="auth-form" id="signUpForm" style="display: none;">
                <div class="auth-header">
                    <div class="auth-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <h2>Create Account</h2>
                    <p>Join SAARTHI for seamless travel</p>
                </div>

                <div class="auth-body">
                    <div class="social-login">
                        <button class="social-btn google" onclick="socialLogin('google')">
                            <i class="fab fa-google"></i>
                            Sign up with Google
                        </button>
                    </div>

                    <div class="auth-divider">
                        <span>or sign up with email</span>
                    </div>

                    <form onsubmit="handleSignUp(event)">
                        <div class="auth-row">
                            <div class="auth-input-group">
                                <label>First Name</label>
                                <div class="auth-input-wrapper">
                                    <i class="fas fa-user"></i>
                                    <input type="text" id="signUpFirstName" placeholder="First name" required>
                                </div>
                            </div>
                            <div class="auth-input-group">
                                <label>Last Name</label>
                                <div class="auth-input-wrapper">
                                    <i class="fas fa-user"></i>
                                    <input type="text" id="signUpLastName" placeholder="Last name" required>
                                </div>
                            </div>
                        </div>

                        <div class="auth-input-group">
                            <label>Email Address</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-envelope"></i>
                                <input type="email" id="signUpEmail" placeholder="Enter your email" required>
                            </div>
                        </div>

                        <div class="auth-input-group">
                            <label>Phone Number</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-phone"></i>
                                <input type="tel" id="signUpPhone" placeholder="+91 XXXXX XXXXX" required>
                            </div>
                        </div>

                        <div class="auth-input-group">
                            <label>Password</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="signUpPassword" placeholder="Create a password" required>
                                <button type="button" class="toggle-password" onclick="togglePassword('signUpPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="password-strength" id="passwordStrength">
                                <div class="strength-bar"></div>
                                <span class="strength-text">Password strength</span>
                            </div>
                        </div>

                        <div class="auth-input-group">
                            <label>Confirm Password</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="signUpConfirmPassword" placeholder="Confirm password" required>
                            </div>
                        </div>

                        <div class="auth-options">
                            <label class="remember-me">
                                <input type="checkbox" id="agreeTerms" required>
                                <span>I agree to the <a href="#">Terms & Conditions</a></span>
                            </label>
                        </div>

                        <button type="submit" class="auth-submit-btn">
                            <i class="fas fa-user-plus"></i>
                            Create Account
                        </button>
                    </form>

                    <div class="auth-switch">
                        Already have an account? 
                        <a href="#" onclick="showSignIn()">Sign In</a>
                    </div>
                </div>
            </div>

            <!-- Forgot Password Form -->
            <div class="auth-form" id="forgotPasswordForm" style="display: none;">
                <div class="auth-header">
                    <div class="auth-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <h2>Reset Password</h2>
                    <p>Enter your email to receive reset link</p>
                </div>

                <div class="auth-body">
                    <form onsubmit="handleForgotPassword(event)">
                        <div class="auth-input-group">
                            <label>Email Address</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-envelope"></i>
                                <input type="email" id="forgotEmail" placeholder="Enter your email" required>
                            </div>
                        </div>

                        <button type="submit" class="auth-submit-btn">
                            <i class="fas fa-paper-plane"></i>
                            Send Reset Link
                        </button>
                    </form>

                    <div class="auth-switch">
                        Remember your password? 
                        <a href="#" onclick="showSignIn()">Sign In</a>
                    </div>
                </div>
            </div>

            <!-- OTP Verification Form -->
            <div class="auth-form" id="otpForm" style="display: none;">
                <div class="auth-header">
                    <div class="auth-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h2>Verify OTP</h2>
                    <p>Enter the 6-digit code sent to your phone</p>
                </div>

                <div class="auth-body">
                    <form onsubmit="handleOTPVerification(event)">
                        <div class="otp-inputs">
                            <input type="text" maxlength="1" class="otp-input" oninput="moveToNext(this, 1)">
                            <input type="text" maxlength="1" class="otp-input" oninput="moveToNext(this, 2)">
                            <input type="text" maxlength="1" class="otp-input" oninput="moveToNext(this, 3)">
                            <input type="text" maxlength="1" class="otp-input" oninput="moveToNext(this, 4)">
                            <input type="text" maxlength="1" class="otp-input" oninput="moveToNext(this, 5)">
                            <input type="text" maxlength="1" class="otp-input" oninput="moveToNext(this, 6)">
                        </div>

                        <div class="otp-timer">
                            <span id="otpTimer">Resend OTP in 30s</span>
                        </div>

                        <button type="submit" class="auth-submit-btn">
                            <i class="fas fa-check-circle"></i>
                            Verify OTP
                        </button>
                    </form>

                    <div class="auth-switch">
                        Didn't receive code? 
                        <a href="#" onclick="resendOTP()">Resend OTP</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bus Booking Modal -->
    <div class="booking-modal" id="busBookingModal">
        <div class="booking-container">
            <button class="close-modal" onclick="closeBusBookingModal()">
                <i class="fas fa-times"></i>
            </button>

            <!-- Booking Steps Progress -->
            <div class="booking-progress">
                <div class="progress-step active" data-step="1">
                    <div class="step-icon"><i class="fas fa-bus"></i></div>
                    <span>Select Bus</span>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="2">
                    <div class="step-icon"><i class="fas fa-chair"></i></div>
                    <span>Select Seats</span>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="3">
                    <div class="step-icon"><i class="fas fa-user"></i></div>
                    <span>Passenger Details</span>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="4">
                    <div class="step-icon"><i class="fas fa-credit-card"></i></div>
                    <span>Payment</span>
                </div>
            </div>

            <!-- Step 1: Bus Selection -->
            <div class="booking-step" id="bookingStep1">
                <div class="step-header">
                    <h2><i class="fas fa-bus"></i> Select Your Bus</h2>
                    <div class="route-summary">
                        <span id="bookingFrom">Ahmedabad</span>
                        <i class="fas fa-arrow-right"></i>
                        <span id="bookingTo">Surat</span>
                        <span class="booking-date" id="bookingDate">Today</span>
                    </div>
                </div>

                <div class="bus-filters">
                    <button class="filter-btn active" onclick="filterBuses('all')">All</button>
                    <button class="filter-btn" onclick="filterBuses('ac')">AC</button>
                    <button class="filter-btn" onclick="filterBuses('non-ac')">Non-AC</button>
                    <button class="filter-btn" onclick="filterBuses('sleeper')">Sleeper</button>
                    <button class="filter-btn" onclick="filterBuses('seater')">Seater</button>
                </div>

                <div class="bus-list" id="busList">
                    <!-- Buses will be populated by JavaScript -->
                </div>
            </div>

            <!-- Step 2: Seat Selection -->
            <div class="booking-step" id="bookingStep2" style="display: none;">
                <div class="step-header">
                    <h2><i class="fas fa-chair"></i> Select Your Seats</h2>
                    <div class="selected-bus-info">
                        <span id="selectedBusName">Gujarat Express</span>
                        <span class="bus-type-badge" id="selectedBusType">AC Sleeper</span>
                    </div>
                </div>

                <div class="seat-selection-container">
                    <div class="seat-layout">
                        <div class="bus-front">
                            <div class="driver-seat">
                                <i class="fas fa-user-tie"></i>
                                <span>Driver</span>
                            </div>
                            <div class="bus-door">
                                <i class="fas fa-door-open"></i>
                            </div>
                        </div>

                        <div class="seat-legend">
                            <div class="legend-item">
                                <div class="seat-demo available"></div>
                                <span>Available</span>
                            </div>
                            <div class="legend-item">
                                <div class="seat-demo selected"></div>
                                <span>Selected</span>
                            </div>
                            <div class="legend-item">
                                <div class="seat-demo booked"></div>
                                <span>Booked</span>
                            </div>
                            <div class="legend-item">
                                <div class="seat-demo ladies"></div>
                                <span>Ladies</span>
                            </div>
                        </div>

                        <div class="seats-container" id="seatsContainer">
                            <!-- Lower Deck -->
                            <div class="deck-label">Lower Deck</div>
                            <div class="seat-deck" id="lowerDeck">
                                <!-- Seats generated by JS -->
                            </div>
                            
                            <!-- Upper Deck -->
                            <div class="deck-label">Upper Deck</div>
                            <div class="seat-deck" id="upperDeck">
                                <!-- Seats generated by JS -->
                            </div>
                        </div>
                    </div>

                    <div class="seat-summary">
                        <h3>Booking Summary</h3>
                        <div class="summary-item">
                            <span>Selected Seats</span>
                            <span id="selectedSeatsDisplay">None</span>
                        </div>
                        <div class="summary-item">
                            <span>No. of Passengers</span>
                            <span id="passengerCountDisplay">0</span>
                        </div>
                        <div class="summary-item">
                            <span>Fare per seat</span>
                            <span id="farePerSeat">0</span>
                        </div>
                        <div class="summary-divider"></div>
                        <div class="summary-item total">
                            <span>Total Fare</span>
                            <span id="totalFareDisplay">0</span>
                        </div>

                        <button class="proceed-btn" id="proceedToPassengers" onclick="goToStep(3)" disabled>
                            Proceed to Passenger Details
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 3: Passenger Details -->
            <div class="booking-step" id="bookingStep3" style="display: none;">
                <div class="step-header">
                    <h2><i class="fas fa-users"></i> Passenger Details</h2>
                    <p>Enter details for all passengers</p>
                </div>

                <div class="passenger-forms" id="passengerForms">
                    <!-- Passenger forms will be generated by JS -->
                </div>

                <div class="contact-details">
                    <h3><i class="fas fa-phone"></i> Contact Details</h3>
                    <p>Booking confirmation will be sent to this email and phone</p>
                    
                    <div class="contact-row">
                        <div class="auth-input-group">
                            <label>Email Address</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-envelope"></i>
                                <input type="email" id="contactEmail" placeholder="Enter email" required>
                            </div>
                        </div>
                        <div class="auth-input-group">
                            <label>Phone Number</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-phone"></i>
                                <input type="tel" id="contactPhone" placeholder="+91 XXXXX XXXXX" required>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="step-actions">
                    <button class="back-btn" onclick="goToStep(2)">
                        <i class="fas fa-arrow-left"></i>
                        Back
                    </button>
                    <button class="proceed-btn" onclick="goToStep(4)">
                        Proceed to Payment
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Step 4: Payment -->
            <div class="booking-step" id="bookingStep4" style="display: none;">
                <div class="step-header">
                    <h2><i class="fas fa-credit-card"></i> Payment</h2>
                    <p>Choose your preferred payment method</p>
                </div>

                <div class="payment-container-inner">
                    <div class="payment-summary-card">
                        <h3>Booking Summary</h3>
                        <div class="summary-route">
                            <div class="route-point">
                                <i class="fas fa-circle"></i>
                                <span id="paymentFrom">Ahmedabad</span>
                            </div>
                            <div class="route-line-vertical"></div>
                            <div class="route-point">
                                <i class="fas fa-map-marker-alt"></i>
                                <span id="paymentTo">Surat</span>
                            </div>
                        </div>
                        <div class="summary-details">
                            <div class="summary-row">
                                <span>Bus</span>
                                <span id="paymentBusName">Gujarat Express</span>
                            </div>
                            <div class="summary-row">
                                <span>Date</span>
                                <span id="paymentDate">Today</span>
                            </div>
                            <div class="summary-row">
                                <span>Seats</span>
                                <span id="paymentSeats">A1, A2</span>
                            </div>
                            <div class="summary-row">
                                <span>Passengers</span>
                                <span id="paymentPassengers">2</span>
                            </div>
                        </div>
                        <div class="price-breakdown">
                            <div class="price-row">
                                <span>Base Fare</span>
                                <span id="paymentBaseFare">800</span>
                            </div>
                            <div class="price-row">
                                <span>GST (5%)</span>
                                <span id="paymentGST">40</span>
                            </div>
                            <div class="price-row">
                                <span>Convenience Fee</span>
                                <span id="paymentConvFee">20</span>
                            </div>
                            <div class="price-row discount" id="discountRow" style="display: none;">
                                <span>Discount</span>
                                <span id="paymentDiscount">-50</span>
                            </div>
                            <div class="price-row total">
                                <span>Total Amount</span>
                                <span id="paymentTotal">860</span>
                            </div>
                        </div>

                        <div class="coupon-section">
                            <div class="coupon-input">
                                <input type="text" id="couponCode" placeholder="Enter coupon code">
                                <button onclick="applyCoupon()">Apply</button>
                            </div>
                            <div class="available-coupons">
                                <span>Available: </span>
                                <button class="coupon-tag" onclick="useCoupon('FIRST50')">FIRST50</button>
                                <button class="coupon-tag" onclick="useCoupon('SAARTHI10')">SAARTHI10</button>
                            </div>
                        </div>
                    </div>

                    <div class="payment-methods-section">
                        <h3>Select Payment Method</h3>

                        <!-- UPI Section -->
                        <div class="payment-section">
                            <div class="payment-section-header" onclick="togglePaymentSection('upi')">
                                <div class="section-title">
                                    <i class="fas fa-mobile-alt"></i>
                                    <span>UPI Payment</span>
                                </div>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="payment-section-body" id="upiSection">
                                <div class="upi-apps">
                                    <button class="upi-app" onclick="selectUPIApp('gpay')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Google_Pay_Logo.svg/512px-Google_Pay_Logo.svg.png" alt="Google Pay">
                                        <span>Google Pay</span>
                                    </button>
                                    <button class="upi-app" onclick="selectUPIApp('phonepe')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/71/PhonePe_Logo.svg/512px-PhonePe_Logo.svg.png" alt="PhonePe">
                                        <span>PhonePe</span>
                                    </button>
                                    <button class="upi-app" onclick="selectUPIApp('paytm')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Paytm_Logo_%28standalone%29.svg/512px-Paytm_Logo_%28standalone%29.svg.png" alt="Paytm">
                                        <span>Paytm</span>
                                    </button>
                                    <button class="upi-app" onclick="selectUPIApp('bhim')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/UPI-Logo-vector.svg/512px-UPI-Logo-vector.svg.png" alt="BHIM">
                                        <span>BHIM UPI</span>
                                    </button>
                                </div>
                                <div class="upi-id-input">
                                    <label>Or enter UPI ID</label>
                                    <div class="auth-input-wrapper">
                                        <input type="text" id="upiIdInput" placeholder="yourname@upi">
                                        <button class="verify-btn" onclick="verifyUPI()">Verify</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Cards Section -->
                        <div class="payment-section">
                            <div class="payment-section-header" onclick="togglePaymentSection('cards')">
                                <div class="section-title">
                                    <i class="fas fa-credit-card"></i>
                                    <span>Credit / Debit Cards</span>
                                </div>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="payment-section-body" id="cardsSection" style="display: none;">
                                <div class="card-brands">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Visa_Inc._logo.svg/200px-Visa_Inc._logo.svg.png" alt="Visa">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/200px-Mastercard-logo.svg.png" alt="Mastercard">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d1/RuPay.svg/200px-RuPay.svg.png" alt="RuPay">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/American_Express_logo_%282018%29.svg/200px-American_Express_logo_%282018%29.svg.png" alt="Amex">
                                </div>
                                <div class="card-form">
                                    <div class="auth-input-group">
                                        <label>Card Number</label>
                                        <div class="auth-input-wrapper">
                                            <i class="fas fa-credit-card"></i>
                                            <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this)">
                                        </div>
                                    </div>
                                    <div class="card-row">
                                        <div class="auth-input-group">
                                            <label>Expiry Date</label>
                                            <div class="auth-input-wrapper">
                                                <i class="fas fa-calendar"></i>
                                                <input type="text" id="cardExpiry" placeholder="MM/YY" maxlength="5" oninput="formatExpiry(this)">
                                            </div>
                                        </div>
                                        <div class="auth-input-group">
                                            <label>CVV</label>
                                            <div class="auth-input-wrapper">
                                                <i class="fas fa-lock"></i>
                                                <input type="password" id="cardCVV" placeholder="***" maxlength="4">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="auth-input-group">
                                        <label>Name on Card</label>
                                        <div class="auth-input-wrapper">
                                            <i class="fas fa-user"></i>
                                            <input type="text" id="cardName" placeholder="Enter name as on card">
                                        </div>
                                    </div>
                                    <label class="save-card">
                                        <input type="checkbox" id="saveCard">
                                        <span>Save this card for future payments</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Net Banking Section -->
                        <div class="payment-section">
                            <div class="payment-section-header" onclick="togglePaymentSection('netbanking')">
                                <div class="section-title">
                                    <i class="fas fa-university"></i>
                                    <span>Net Banking</span>
                                </div>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="payment-section-body" id="netbankingSection" style="display: none;">
                                <div class="popular-banks">
                                    <button class="bank-btn" onclick="selectBank('sbi')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/SBI-logo.svg/200px-SBI-logo.svg.png" alt="SBI">
                                        <span>SBI</span>
                                    </button>
                                    <button class="bank-btn" onclick="selectBank('hdfc')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/HDFC_Bank_Logo.svg/200px-HDFC_Bank_Logo.svg.png" alt="HDFC">
                                        <span>HDFC</span>
                                    </button>
                                    <button class="bank-btn" onclick="selectBank('icici')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/12/ICICI_Bank_Logo.svg/200px-ICICI_Bank_Logo.svg.png" alt="ICICI">
                                        <span>ICICI</span>
                                    </button>
                                    <button class="bank-btn" onclick="selectBank('axis')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Axis_Bank_logo.svg/200px-Axis_Bank_logo.svg.png" alt="Axis">
                                        <span>Axis</span>
                                    </button>
                                    <button class="bank-btn" onclick="selectBank('kotak')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Kotak_Mahindra_Bank_logo.svg/200px-Kotak_Mahindra_Bank_logo.svg.png" alt="Kotak">
                                        <span>Kotak</span>
                                    </button>
                                    <button class="bank-btn" onclick="selectBank('bob')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Bank_of_Baroda_logo.svg/200px-Bank_of_Baroda_logo.svg.png" alt="BOB">
                                        <span>BOB</span>
                                    </button>
                                </div>
                                <div class="other-banks">
                                    <select id="otherBanks" onchange="selectBank(this.value)">
                                        <option value="">Select Other Bank</option>
                                        <option value="pnb">Punjab National Bank</option>
                                        <option value="canara">Canara Bank</option>
                                        <option value="union">Union Bank</option>
                                        <option value="indian">Indian Bank</option>
                                        <option value="boi">Bank of India</option>
                                        <option value="idbi">IDBI Bank</option>
                                        <option value="federal">Federal Bank</option>
                                        <option value="yes">Yes Bank</option>
                                        <option value="indusind">IndusInd Bank</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Wallets Section -->
                        <div class="payment-section">
                            <div class="payment-section-header" onclick="togglePaymentSection('wallets')">
                                <div class="section-title">
                                    <i class="fas fa-wallet"></i>
                                    <span>Mobile Wallets</span>
                                </div>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="payment-section-body" id="walletsSection" style="display: none;">
                                <div class="wallet-options">
                                    <button class="wallet-btn" onclick="selectWallet('paytm')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Paytm_Logo_%28standalone%29.svg/200px-Paytm_Logo_%28standalone%29.svg.png" alt="Paytm">
                                        <span>Paytm Wallet</span>
                                    </button>
                                    <button class="wallet-btn" onclick="selectWallet('amazon')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/200px-Amazon_logo.svg.png" alt="Amazon">
                                        <span>Amazon Pay</span>
                                    </button>
                                    <button class="wallet-btn" onclick="selectWallet('mobikwik')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/MobiKwik_Logo.svg/200px-MobiKwik_Logo.svg.png" alt="Mobikwik">
                                        <span>Mobikwik</span>
                                    </button>
                                    <button class="wallet-btn" onclick="selectWallet('freecharge')">
                                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Freecharge_Logo.svg/200px-Freecharge_Logo.svg.png" alt="Freecharge">
                                        <span>Freecharge</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- EMI Section -->
                        <div class="payment-section">
                            <div class="payment-section-header" onclick="togglePaymentSection('emi')">
                                <div class="section-title">
                                    <i class="fas fa-percent"></i>
                                    <span>EMI Options</span>
                                    <span class="emi-badge">No Cost EMI</span>
                                </div>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="payment-section-body" id="emiSection" style="display: none;">
                                <div class="emi-options">
                                    <label class="emi-option">
                                        <input type="radio" name="emiOption" value="3">
                                        <div class="emi-details">
                                            <span class="emi-months">3 Months</span>
                                            <span class="emi-amount">287/month</span>
                                            <span class="emi-interest">No Cost EMI</span>
                                        </div>
                                    </label>
                                    <label class="emi-option">
                                        <input type="radio" name="emiOption" value="6">
                                        <div class="emi-details">
                                            <span class="emi-months">6 Months</span>
                                            <span class="emi-amount">144/month</span>
                                            <span class="emi-interest">No Cost EMI</span>
                                        </div>
                                    </label>
                                    <label class="emi-option">
                                        <input type="radio" name="emiOption" value="12">
                                        <div class="emi-details">
                                            <span class="emi-months">12 Months</span>
                                            <span class="emi-amount">75/month</span>
                                            <span class="emi-interest">@ 12% p.a.</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Pay Later Section -->
                        <div class="payment-section">
                            <div class="payment-section-header" onclick="togglePaymentSection('paylater')">
                                <div class="section-title">
                                    <i class="fas fa-clock"></i>
                                    <span>Pay Later</span>
                                </div>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="payment-section-body" id="paylaterSection" style="display: none;">
                                <div class="paylater-options">
                                    <button class="paylater-btn" onclick="selectPayLater('simpl')">
                                        <span class="paylater-name">Simpl</span>
                                        <span class="paylater-desc">Pay in 3 parts, 0% interest</span>
                                    </button>
                                    <button class="paylater-btn" onclick="selectPayLater('lazypay')">
                                        <span class="paylater-name">LazyPay</span>
                                        <span class="paylater-desc">Pay next month</span>
                                    </button>
                                    <button class="paylater-btn" onclick="selectPayLater('zestmoney')">
                                        <span class="paylater-name">ZestMoney</span>
                                        <span class="paylater-desc">Easy EMIs</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <button class="pay-now-btn" id="finalPayBtn" onclick="processBookingPayment()">
                            <i class="fas fa-lock"></i>
                            Pay 860 Securely
                        </button>

                        <div class="payment-security">
                            <div class="security-item">
                                <i class="fas fa-shield-alt"></i>
                                <span>256-bit SSL Encryption</span>
                            </div>
                            <div class="security-item">
                                <i class="fas fa-lock"></i>
                                <span>PCI DSS Compliant</span>
                            </div>
                            <div class="security-item">
                                <i class="fas fa-check-circle"></i>
                                <span>100% Secure Payment</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="step-actions">
                    <button class="back-btn" onclick="goToStep(3)">
                        <i class="fas fa-arrow-left"></i>
                        Back
                    </button>
                </div>
            </div>

            <!-- Payment Success -->
            <div class="booking-step" id="bookingSuccess" style="display: none;">
                <div class="success-container">
                    <div class="success-animation">
                        <div class="success-checkmark">
                            <i class="fas fa-check"></i>
                        </div>
                    </div>
                    <h2>Booking Confirmed!</h2>
                    <p>Your ticket has been booked successfully</p>

                    <div class="ticket-card">
                        <div class="ticket-header">
                            <div class="ticket-logo">SAARTHI</div>
                            <div class="ticket-qr">
                                <i class="fas fa-qrcode"></i>
                            </div>
                        </div>
                        <div class="ticket-body">
                            <div class="ticket-route">
                                <div class="ticket-city">
                                    <span class="city-code" id="ticketFromCode">AMD</span>
                                    <span class="city-name" id="ticketFromCity">Ahmedabad</span>
                                </div>
                                <div class="ticket-journey">
                                    <i class="fas fa-bus"></i>
                                    <div class="journey-line"></div>
                                </div>
                                <div class="ticket-city">
                                    <span class="city-code" id="ticketToCode">SUR</span>
                                    <span class="city-name" id="ticketToCity">Surat</span>
                                </div>
                            </div>
                            <div class="ticket-info-grid">
                                <div class="ticket-info-item">
                                    <label>Booking ID</label>
                                    <value id="finalTicketId">SAARTHI-XXXXXX</value>
                                </div>
                                <div class="ticket-info-item">
                                    <label>Travel Date</label>
                                    <value id="finalTicketDate">-</value>
                                </div>
                                <div class="ticket-info-item">
                                    <label>Departure</label>
                                    <value id="finalDepartureTime">-</value>
                                </div>
                                <div class="ticket-info-item">
                                    <label>Seats</label>
                                    <value id="finalSeats">-</value>
                                </div>
                                <div class="ticket-info-item">
                                    <label>Bus</label>
                                    <value id="finalBusName">-</value>
                                </div>
                                <div class="ticket-info-item">
                                    <label>Amount Paid</label>
                                    <value id="finalAmount">0</value>
                                </div>
                            </div>
                        </div>
                        <div class="ticket-footer">
                            <span>Show this ticket at the time of boarding</span>
                        </div>
                    </div>

                    <div class="success-actions">
                        <button class="btn btn-primary" onclick="downloadTicket()">
                            <i class="fas fa-download"></i>
                            Download Ticket
                        </button>
                        <button class="btn btn-outline" onclick="shareTicket()">
                            <i class="fas fa-share-alt"></i>
                            Share
                        </button>
                        <button class="btn btn-secondary" onclick="closeBusBookingModal()">
                            <i class="fas fa-home"></i>
                            Back to Home
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="payment-modal" id="paymentModal">
        <div class="payment-container">
            <button class="close-modal" onclick="closePaymentModal()">
                <i class="fas fa-times"></i>
            </button>

            <div class="payment-header">
                <h2>Complete Payment</h2>
                <div class="payment-amount" id="paymentAmount">450</div>
            </div>

            <div class="payment-body" id="paymentForm">
                <div class="payment-methods">
                    <label class="payment-method active" onclick="selectPaymentMethod(this, 'upi')">
                        <input type="radio" name="paymentMethod" value="upi" checked>
                        <div class="payment-method-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="payment-method-info">
                            <h4>UPI</h4>
                            <span>Google Pay, PhonePe, Paytm</span>
                        </div>
                    </label>

                    <label class="payment-method" onclick="selectPaymentMethod(this, 'card')">
                        <input type="radio" name="paymentMethod" value="card">
                        <div class="payment-method-icon">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <div class="payment-method-info">
                            <h4>Credit/Debit Card</h4>
                            <span>Visa, Mastercard, RuPay</span>
                        </div>
                    </label>

                    <label class="payment-method" onclick="selectPaymentMethod(this, 'netbanking')">
                        <input type="radio" name="paymentMethod" value="netbanking">
                        <div class="payment-method-icon">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="payment-method-info">
                            <h4>Net Banking</h4>
                            <span>All major banks supported</span>
                        </div>
                    </label>

                    <label class="payment-method" onclick="selectPaymentMethod(this, 'wallet')">
                        <input type="radio" name="paymentMethod" value="wallet">
                        <div class="payment-method-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="payment-method-info">
                            <h4>Digital Wallet</h4>
                            <span>Paytm, Amazon Pay, Mobikwik</span>
                        </div>
                    </label>
                </div>

                <div id="upiFormOld">
                    <div class="payment-form-group">
                        <label>UPI ID</label>
                        <input type="text" placeholder="yourname@upi">
                    </div>
                </div>

                <div id="cardFormOld" style="display: none;">
                    <div class="payment-form-group">
                        <label>Card Number</label>
                        <input type="text" placeholder="1234 5678 9012 3456" maxlength="19">
                    </div>
                    <div class="card-row">
                        <div class="payment-form-group">
                            <label>Expiry Date</label>
                            <input type="text" placeholder="MM/YY" maxlength="5">
                        </div>
                        <div class="payment-form-group">
                            <label>CVV</label>
                            <input type="password" placeholder="***" maxlength="3">
                        </div>
                    </div>
                    <div class="payment-form-group">
                        <label>Card Holder Name</label>
                        <input type="text" placeholder="Name on card">
                    </div>
                </div>

                <button class="pay-now-btn" onclick="processPayment()">
                    <i class="fas fa-lock"></i>
                    Pay Securely
                </button>

                <div class="secure-badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>Secured by 256-bit SSL encryption</span>
                </div>
            </div>

            <div class="payment-success" id="paymentSuccess">
                <div class="success-icon">
                    <i class="fas fa-check"></i>
                </div>
                <h3 class="success-title">Payment Successful!</h3>
                <p class="success-message">Your booking has been confirmed</p>

                <div class="ticket-preview">
                    <div class="ticket-id" id="oldTicketId">SAARTHI-2024-XXXXX</div>
                    <div class="ticket-details">
                        <div class="ticket-item">
                            <label>From</label>
                            <value id="oldTicketFrom">Ahmedabad</value>
                        </div>
                        <div class="ticket-item">
                            <label>To</label>
                            <value id="oldTicketTo">Surat</value>
                        </div>
                        <div class="ticket-item">
                            <label>Date</label>
                            <value id="oldTicketDate">Today</value>
                        </div>
                        <div class="ticket-item">
                            <label>Passengers</label>
                            <value id="oldTicketPassengers">1</value>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="closePaymentModal()">
                    <i class="fas fa-download"></i>
                    Download Ticket
                </button>
            </div>
        </div>
    </div>

    <!-- Feedback Section -->
    <section class="feedback-section" id="contact">
        <div class="section-header">
            <span class="section-badge"> Your Voice Matters</span>
            <h2 class="section-title">Share Your Experience</h2>
            <p class="section-subtitle">Help us improve and serve you better</p>
        </div>

        <div class="feedback-container">
            <div class="feedback-wrapper">
                <div class="feedback-visual">
                    <h3>We Value Your Feedback!</h3>
                    <p>
                        Your opinions help us create better travel experiences. 
                        Share your thoughts and be a part of our journey to excellence.
                    </p>
                    <div class="rating-display">
                        <div class="rating-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <div class="rating-text">4.8/5</div>
                    </div>
                    <p style="margin-top: 20px; font-size: 0.9rem; opacity: 0.8;">
                        Based on 50,000+ reviews
                    </p>
                </div>

                <div class="feedback-form">
                    <p style="margin-bottom: 15px; font-weight: 600;">How was your experience?</p>
                    <div class="emoji-rating">
                        <button class="emoji-btn" onclick="selectEmoji(this, 1)"></button>
                        <button class="emoji-btn" onclick="selectEmoji(this, 2)"></button>
                        <button class="emoji-btn" onclick="selectEmoji(this, 3)"></button>
                        <button class="emoji-btn" onclick="selectEmoji(this, 4)"></button>
                        <button class="emoji-btn" onclick="selectEmoji(this, 5)"></button>
                    </div>

                    <div class="feedback-tags">
                        <button class="feedback-tag" onclick="toggleTag(this)"> Clean Vehicle</button>
                        <button class="feedback-tag" onclick="toggleTag(this)"> On Time</button>
                        <button class="feedback-tag" onclick="toggleTag(this)"> Friendly Driver</button>
                        <button class="feedback-tag" onclick="toggleTag(this)"> Comfortable Seats</button>
                        <button class="feedback-tag" onclick="toggleTag(this)"> Easy Booking</button>
                        <button class="feedback-tag" onclick="toggleTag(this)"> Good Value</button>
                    </div>

                    <textarea class="feedback-textarea" id="feedbackText" placeholder="Tell us more about your experience..."></textarea>

                    <button class="btn btn-primary" style="width: 100%;" onclick="submitFeedback()">
                        <i class="fas fa-paper-plane"></i>
                        Submit Feedback
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-grid">
            <div class="footer-brand">
                <div class="logo-text">SAARTHI</div>
                <div class="tagline">ONE PLATFORM, EVERY JOURNEY</div>
                <p>
                    Your trusted travel companion across Gujarat. 
                    We're committed to making every journey safe, 
                    comfortable, and memorable.
                </p>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                </div>
            </div>

            <div class="footer-column">
                <h4>Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Home</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> About Us</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Routes</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Fare Calculator</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Contact</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h4>Services</h4>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Bus Booking</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Train Booking</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Cab Booking</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Group Travel</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Corporate</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h4>Support</h4>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Help Center</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> FAQs</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Cancellation</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Refund Policy</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Terms of Use</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <div class="footer-newsletter">
                    <h4>Stay Updated</h4>
                    <p style="color: #aaa; font-size: 0.9rem; margin-bottom: 15px;">
                        Subscribe for offers & updates
                    </p>
                    <div class="newsletter-input">
                        <input type="email" id="newsletterEmail" placeholder="Your email">
                        <button onclick="subscribeNewsletter()"><i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <p> 2024 SAARTHI. All rights reserved. Made with  for Tech Expo</p>
            <div class="footer-badges">
                <div class="footer-badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>100% Secure</span>
                </div>
                <div class="footer-badge">
                    <i class="fas fa-award"></i>
                    <span>Certified Platform</span>
                </div>
                <div class="footer-badge">
                    <i class="fas fa-headset"></i>
                    <span>24/7 Support</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button class="scroll-top" id="scrollTop" onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // Gujarat Cities Data (150+ cities)
        const gujaratCities = [
            "Ahmedabad", "Surat", "Vadodara", "Rajkot", "Bhavnagar", "Jamnagar", "Junagadh", "Gandhinagar", "Anand", "Nadiad",
            "Morbi", "Surendranagar", "Bharuch", "Mehsana", "Bhuj", "Porbandar", "Palanpur", "Valsad", "Navsari", "Veraval",
            "Godhra", "Patan", "Kalol", "Dahod", "Botad", "Amreli", "Deesa", "Jetpur", "Vapi", "Gondal",
            "Sidhpur", "Modasa", "Himatnagar", "Visnagar", "Gandhidham", "Mandvi", "Kadi", "Viramgam", "Dholka", "Unjha",
            "Ankleshwar", "Olpad", "Bardoli", "Vyara", "Songadh", "Mandal", "Petlad", "Borsad", "Khambhat", "Umreth",
            "Halol", "Lunawada", "Santrampur", "Vadnagar", "Thara", "Sami", "Radhanpur", "Santalpur", "Chanasma", "Harij",
            "Dhandhuka", "Limbdi", "Dhrangadhra", "Halvad", "Wadhwan", "Jasdan", "Upleta", "Dhoraji", "Manavadar", "Talala",
            "Mangrol", "Kodinar", "Una", "Palitana", "Sihor", "Talaja", "Mahuva", "Gariadhar", "Dhola", "Savarkundla",
            "Dhari", "Liliya", "Khambha", "Rajula", "Jafrabad", "Lakhpat", "Nakhatrana", "Bhachau", "Rapar", "Adipur",
            "Tuna", "Wankaner", "Paddhari", "Lodhika", "Tankara", "Rajkot Rural", "Kotda Sangani", "Dhanera", "Tharad", "Bhabhar",
            "Amirgadh", "Danta", "Vadgam", "Vijapur", "Mansa", "Kheralu", "Idar", "Khedbrahma", "Bhiloda", "Meghraj",
            "Chhota Udaipur", "Naswadi", "Kawant", "Dahod Rural", "Devgadh Baria", "Fatehpura", "Garbada", "Jhalod", "Limkheda", "Sanjeli",
            "Dohad", "Mahisagar", "Balasinor", "Virpur", "Kadana", "Khanpur", "Santrampur Rural", "Devgadh", "Chhotaudepur", "Kavant",
            "Panch Mahals", "Morva Hadaf", "Shahera", "Kalia", "Lunavada Rural", "Malpur", "Bayad", "Dhansura", "Talod", "Prantij",
            "Sabarkantha", "Vadali", "Himmatnagar Rural", "Gambhoi", "Poshina", "Sabli", "Kheda", "Kapadvanj", "Kathlal", "Mahudha"
        ];

        // Vehicle Data
        const vehicleData = {
            bus: {
                names: ["Gujarat Express", "Narmada Travels", "Patel Tours", "Jay Gujarat", "Shreeji Travels"],
                types: ["AC Sleeper", "Non-AC Seater", "Volvo AC", "Semi-Sleeper", "Deluxe"]
            },
            train: {
                names: ["Shatabdi Express", "Rajdhani Express", "Gujarat Mail", "Karnavati Express", "Sabarmati Express"],
                types: ["AC Chair Car", "Sleeper Class", "3AC", "2AC", "1AC"]
            }
        };

        const pilotNames = ["Ramesh Patel", "Suresh Kumar", "Mahesh Shah", "Rajesh Desai", "Bharat Mehta", "Jayesh Modi", "Kamlesh Solanki", "Dinesh Parmar"];

        // Global state
        let currentPassengers = 1;
        let selectedTransportType = 'bus';
        let selectedVehicleType = 'bike';
        let selectedEmoji = 0;
        let currentFare = 450;
        let departureCity = '';
        let arrivalCity = '';

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Hide loader
            setTimeout(() => {
                document.getElementById('loader').classList.add('hidden');
            }, 2000);

            // Set default date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('travelDate').value = today;
            document.getElementById('travelDate').min = today;

            // Initialize autocomplete
            setupAutocomplete('departureInput', 'departureDropdown');
            setupAutocomplete('arrivalInput', 'arrivalDropdown');

            // Navbar scroll effect
            window.addEventListener('scroll', function() {
                const navbar = document.getElementById('navbar');
                const scrollTop = document.getElementById('scrollTop');
                
                if (window.scrollY > 100) {
                    navbar.classList.add('scrolled');
                    scrollTop.classList.add('show');
                } else {
                    navbar.classList.remove('scrolled');
                    scrollTop.classList.remove('show');
                }
            });

            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.input-group')) {
                    document.querySelectorAll('.autocomplete-dropdown').forEach(d => d.classList.remove('show'));
                }
            });

            // Update vehicle recommendation on load
            updateVehicleRecommendation();
        });

        // Autocomplete Setup
        function setupAutocomplete(inputId, dropdownId) {
            const input = document.getElementById(inputId);
            const dropdown = document.getElementById(dropdownId);

            input.addEventListener('input', function() {
                const value = this.value.toLowerCase();
                if (value.length < 1) {
                    dropdown.classList.remove('show');
                    return;
                }

                const filtered = gujaratCities.filter(city => 
                    city.toLowerCase().includes(value)
                ).slice(0, 8);

                if (filtered.length > 0) {
                    dropdown.innerHTML = filtered.map(city => `
                        <div class="autocomplete-item" onclick="selectCity('${inputId}', '${city}')">
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                <div class="city-name">${city}</div>
                                <div class="city-type">Gujarat, India</div>
                            </div>
                        </div>
                    `).join('');
                    dropdown.classList.add('show');
                } else {
                    dropdown.classList.remove('show');
                }
            });

            input.addEventListener('focus', function() {
                if (this.value.length >= 1) {
                    this.dispatchEvent(new Event('input'));
                }
            });
        }

        // Select City from Autocomplete
        function selectCity(inputId, city) {
            document.getElementById(inputId).value = city;
            document.querySelectorAll('.autocomplete-dropdown').forEach(d => d.classList.remove('show'));
            
            if (inputId === 'departureInput') {
                departureCity = city;
            } else {
                arrivalCity = city;
            }

            // Update map if both cities are selected
            if (departureCity && arrivalCity && departureCity !== arrivalCity) {
                updateMapForRoute(departureCity, arrivalCity);
            }
        }

        // Swap Cities
        function swapCities() {
            const departure = document.getElementById('departureInput');
            const arrival = document.getElementById('arrivalInput');
            const temp = departure.value;
            departure.value = arrival.value;
            arrival.value = temp;
            
            // Update city variables
            const tempCity = departureCity;
            departureCity = arrivalCity;
            arrivalCity = tempCity;
            
            // Update map with swapped route
            if (departureCity && arrivalCity) {
                updateMapForRoute(departureCity, arrivalCity);
            }
        }

        // Select Transport Type
        function selectTransport(element) {
            document.querySelectorAll('.transport-option').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            selectedTransportType = element.dataset.type;
            
            // Update map vehicle icon
            const vehicle = document.getElementById('mapVehicle');
            if (selectedTransportType === 'train') {
                vehicle.textContent = '';
            } else {
                vehicle.textContent = '';
            }
        }

        // Search Routes
        function searchRoutes() {
            const departure = document.getElementById('departureInput').value;
            const arrival = document.getElementById('arrivalInput').value;
            const date = document.getElementById('travelDate').value;

            if (!departure || !arrival) {
                showToast('error', 'Missing Information', 'Please enter both departure and arrival cities');
                return;
            }

            if (departure === arrival) {
                showToast('error', 'Invalid Route', 'Departure and arrival cities cannot be the same');
                return;
            }

            // Show loading
            showToast('info', 'Searching...', 'Finding the best routes for you');

            // Generate routes
            setTimeout(() => {
                generateRoutes(departure, arrival, date);
                document.getElementById('routes').classList.add('show');
                document.getElementById('routes').scrollIntoView({ behavior: 'smooth' });
                showToast('success', 'Routes Found', 'We found several options for your journey!');
            }, 1500);
        }

        // Generate Routes
        function generateRoutes(from, to, date) {
            const routeGrid = document.getElementById('routeGrid');
            const numRoutes = Math.floor(Math.random() * 3) + 3; // 3-5 routes
            let html = '';

            for (let i = 0; i < numRoutes; i++) {
                const type = (selectedTransportType === 'all') 
                    ? (Math.random() > 0.5 ? 'bus' : 'train') 
                    : selectedTransportType;
                
                const data = vehicleData[type];
                const name = data.names[Math.floor(Math.random() * data.names.length)];
                const vehicleType = data.types[Math.floor(Math.random() * data.types.length)];
                
                const departHour = 6 + Math.floor(Math.random() * 14);
                const duration = 2 + Math.floor(Math.random() * 6);
                const arriveHour = (departHour + duration) % 24;
                
                const basePrice = type === 'bus' ? 200 : 300;
                const price = basePrice + Math.floor(Math.random() * 400);
                
                const seats = Math.floor(Math.random() * 30) + 10;
                const rating = (3.5 + Math.random() * 1.5).toFixed(1);

                html += `
                    <div class="route-card" onclick="selectRoute('${name}', '${vehicleType}', ${price}, '${from}', '${to}')">
                        <div class="route-header ${type}">
                            <div class="route-type">
                                <i class="fas fa-${type === 'bus' ? 'bus' : 'train'}"></i>
                                <div class="route-type-info">
                                    <h3>${name}</h3>
                                    <span>${vehicleType}</span>
                                </div>
                            </div>
                            <div class="route-price">
                                <div class="price">${price}</div>
                                <div class="label">per person</div>
                            </div>
                        </div>
                        <div class="route-body">
                            <div class="route-timeline">
                                <div class="route-point">
                                    <div class="time">${String(departHour).padStart(2, '0')}:00</div>
                                    <div class="city">${from}</div>
                                </div>
                                <div class="route-line">
                                    <div class="route-duration">${duration}h ${Math.floor(Math.random() * 60)}m</div>
                                </div>
                                <div class="route-point">
                                    <div class="time">${String(arriveHour).padStart(2, '0')}:00</div>
                                    <div class="city">${to}</div>
                                </div>
                            </div>
                            <div class="route-details">
                                <div class="detail-item">
                                    <i class="fas fa-chair"></i>
                                    <div class="info">${seats} seats<span>Available</span></div>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-star"></i>
                                    <div class="info">${rating} <span>Rating</span></div>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-wifi"></i>
                                    <div class="info">WiFi<span>Available</span></div>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-snowflake"></i>
                                    <div class="info">${vehicleType.includes('AC') ? 'AC' : 'Non-AC'}<span>Climate</span></div>
                                </div>
                            </div>
                            <div class="route-actions">
                                <button class="btn btn-outline">View Details</button>
                                <button class="btn btn-primary">Book Now</button>
                            </div>
                        </div>
                    </div>
                `;
            }

            routeGrid.innerHTML = html;
        }

        // Select Route
        function selectRoute(name, type, price, from, to) {
            departureCity = from;
            arrivalCity = to;
            currentFare = price;
            
            // Update vehicle info panel
            document.getElementById('vehicleName').textContent = name;
            document.getElementById('detailVehicleType').textContent = type;
            document.getElementById('vehicleNumber').textContent = 'GJ-' + String(Math.floor(Math.random() * 99)).padStart(2, '0') + '-' + 
                String.fromCharCode(65 + Math.floor(Math.random() * 26)) + String.fromCharCode(65 + Math.floor(Math.random() * 26)) + '-' + 
                String(Math.floor(Math.random() * 9999)).padStart(4, '0');
            document.getElementById('detailVehicleNum').textContent = document.getElementById('vehicleNumber').textContent;
            
            const pilot = pilotNames[Math.floor(Math.random() * pilotNames.length)];
            document.getElementById('pilotName').textContent = pilot;
            document.getElementById('pilotExp').textContent = Math.floor(Math.random() * 20) + 5;
            document.getElementById('pilotAge').textContent = Math.floor(Math.random() * 20) + 35;
            
            // Update the real map with the selected route
            updateMapForRoute(from, to);
            
            // Scroll to map section
            document.getElementById('map').scrollIntoView({ behavior: 'smooth' });
            
            showToast('success', 'Route Selected', `${name} from ${from} to ${to}`);
        }

        // Calculate Fare
        function calculateFare() {
            const from = document.getElementById('fareFrom').value;
            const to = document.getElementById('fareTo').value;
            const type = document.getElementById('fareTransport').value;

            if (!from || !to) {
                showToast('error', 'Missing Information', 'Please enter both cities');
                return;
            }

            // Calculate base fare based on type
            const fareRates = {
                'bus-regular': 1.5,
                'bus-ac': 2.5,
                'bus-sleeper': 3,
                'train-general': 0.8,
                'train-sleeper': 1.5,
                'train-ac': 3.5
            };

            const distance = 100 + Math.floor(Math.random() * 400);
            const rate = fareRates[type];
            const baseFare = Math.round(distance * rate);
            const gst = Math.round(baseFare * 0.05);
            const serviceFee = 20;
            const total = baseFare + gst + serviceFee;

            document.getElementById('baseFare').textContent = '' + baseFare;
            document.getElementById('gstAmount').textContent = '' + gst;
            document.getElementById('serviceFee').textContent = '' + serviceFee;
            document.getElementById('totalFare').innerHTML = '<strong>' + total + '</strong>';
            document.getElementById('fareAmount').textContent = '' + total;
            document.getElementById('fareResult').style.display = 'block';

            currentFare = total;
            showToast('success', 'Fare Calculated', `Estimated fare: ${total}`);
        }

        // Update Passengers
        function updatePassengers(change) {
            currentPassengers = Math.max(1, Math.min(20, currentPassengers + change));
            document.getElementById('passengerDisplay').textContent = currentPassengers;
            updateVehicleRecommendation();
        }

        // Update Vehicle Recommendation
        function updateVehicleRecommendation() {
            let emoji, name, desc;
            
            if (currentPassengers === 1) {
                emoji = '';
                name = 'Solo Traveler';
                desc = 'Perfect for individual journeys';
            } else if (currentPassengers <= 2) {
                emoji = '';
                name = 'Bike / Auto';
                desc = 'Quick and economical for 2 people';
            } else if (currentPassengers <= 3) {
                emoji = '';
                name = 'Auto Rickshaw';
                desc = 'Best for 3 passengers in the city';
            } else if (currentPassengers <= 5) {
                emoji = '';
                name = 'Car / Sedan';
                desc = 'Comfortable for family trips';
            } else if (currentPassengers <= 7) {
                emoji = '';
                name = 'SUV / MUV';
                desc = 'Spacious for larger groups';
            } else if (currentPassengers <= 12) {
                emoji = '';
                name = 'Mini Bus';
                desc = 'Perfect for group outings';
            } else {
                emoji = '';
                name = 'Full Size Bus';
                desc = 'Best for large groups and events';
            }

            document.getElementById('recommendedEmoji').textContent = emoji;
            document.getElementById('recommendedName').textContent = name;
            document.getElementById('recommendedDesc').textContent = desc;
        }

        // Select Vehicle
        function selectVehicle(element, type) {
            document.querySelectorAll('.vehicle-option').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            selectedVehicleType = type;
        }

        // Open Payment Modal
        function openPaymentModal() {
            const passengers = parseInt(document.getElementById('passengerCount').value) || currentPassengers;
            const totalAmount = currentFare * passengers;
            
            document.getElementById('paymentAmount').textContent = '' + totalAmount;
            document.getElementById('paymentModal').classList.add('show');
            document.getElementById('paymentForm').style.display = 'block';
            document.getElementById('paymentSuccess').classList.remove('show');
            document.body.style.overflow = 'hidden';
        }

        // Close Payment Modal
        function closePaymentModal() {
            document.getElementById('paymentModal').classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        // Select Payment Method
        function selectPaymentMethod(element, method) {
            document.querySelectorAll('.payment-method').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            
            document.getElementById('upiForm').style.display = method === 'upi' ? 'block' : 'none';
            document.getElementById('cardForm').style.display = method === 'card' ? 'block' : 'none';
        }

        // Process Payment
        function processPayment() {
            const payBtn = document.querySelector('.pay-now-btn');
            payBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            payBtn.disabled = true;

            setTimeout(() => {
                // Generate ticket
                const ticketId = 'SAARTHI-2024-' + Math.random().toString(36).substr(2, 9).toUpperCase();
                document.getElementById('ticketId').textContent = ticketId;
                document.getElementById('ticketFrom').textContent = departureCity || 'Ahmedabad';
                document.getElementById('ticketTo').textContent = arrivalCity || 'Surat';
                document.getElementById('ticketDate').textContent = document.getElementById('travelDate').value || new Date().toLocaleDateString();
                document.getElementById('ticketPassengers').textContent = currentPassengers;

                // Show success
                document.getElementById('paymentForm').style.display = 'none';
                document.getElementById('paymentSuccess').classList.add('show');
                
                payBtn.innerHTML = '<i class="fas fa-lock"></i> Pay Securely';
                payBtn.disabled = false;

                showToast('success', 'Booking Confirmed!', 'Your ticket has been generated');
            }, 2500);
        }

        // Select Emoji Rating
        function selectEmoji(element, rating) {
            document.querySelectorAll('.emoji-btn').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            selectedEmoji = rating;
        }

        // Toggle Feedback Tag
        function toggleTag(element) {
            element.classList.toggle('active');
        }

        // Submit Feedback
        function submitFeedback() {
            const feedback = document.getElementById('feedbackText').value;
            const activeTags = document.querySelectorAll('.feedback-tag.active');
            
            if (selectedEmoji === 0) {
                showToast('error', 'Rating Required', 'Please select an emoji rating');
                return;
            }

            showToast('success', 'Thank You!', 'Your feedback has been submitted successfully');
            
            // Reset form
            document.querySelectorAll('.emoji-btn').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.feedback-tag').forEach(el => el.classList.remove('active'));
            document.getElementById('feedbackText').value = '';
            selectedEmoji = 0;
        }

        // Subscribe Newsletter
        function subscribeNewsletter() {
            const email = document.getElementById('newsletterEmail').value;
            if (!email || !email.includes('@')) {
                showToast('error', 'Invalid Email', 'Please enter a valid email address');
                return;
            }
            showToast('success', 'Subscribed!', 'You will receive updates at ' + email);
            document.getElementById('newsletterEmail').value = '';
        }

        // Show Toast Notification
        function showToast(type, title, message) {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const iconMap = {
                success: 'fa-check',
                error: 'fa-times',
                info: 'fa-info'
            };

            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="fas ${iconMap[type]}"></i>
                </div>
                <div class="toast-content">
                    <h4>${title}</h4>
                    <p>${message}</p>
                </div>
            `;

            container.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        // Mobile Navigation
        function openMobileNav() {
            document.getElementById('mobileNav').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileNav() {
            document.getElementById('mobileNav').classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        // Scroll to Top
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Close modal on outside click
        document.getElementById('paymentModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closePaymentModal();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closePaymentModal();
                closeMobileNav();
                closeAuthModal();
                closeBusBookingModal();
            }
        });

        // =============================================
        // AUTH SYSTEM FUNCTIONS
        // =============================================

        let currentUser = null;

        // Open Auth Modal
        function openAuthModal(type = 'signin') {
            document.getElementById('authModal').classList.add('show');
            document.body.style.overflow = 'hidden';
            
            if (type === 'signup') {
                showSignUp();
            } else {
                showSignIn();
            }
        }

        // Close Auth Modal
        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        // Show Sign In Form
        function showSignIn() {
            document.getElementById('signInForm').style.display = 'block';
            document.getElementById('signUpForm').style.display = 'none';
            document.getElementById('forgotPasswordForm').style.display = 'none';
            document.getElementById('otpForm').style.display = 'none';
        }

        // Show Sign Up Form
        function showSignUp() {
            document.getElementById('signInForm').style.display = 'none';
            document.getElementById('signUpForm').style.display = 'block';
            document.getElementById('forgotPasswordForm').style.display = 'none';
            document.getElementById('otpForm').style.display = 'none';
        }

        // Show Forgot Password Form
        function showForgotPassword() {
            document.getElementById('signInForm').style.display = 'none';
            document.getElementById('signUpForm').style.display = 'none';
            document.getElementById('forgotPasswordForm').style.display = 'block';
            document.getElementById('otpForm').style.display = 'none';
        }

        // Show OTP Form
        function showOTPForm() {
            document.getElementById('signInForm').style.display = 'none';
            document.getElementById('signUpForm').style.display = 'none';
            document.getElementById('forgotPasswordForm').style.display = 'none';
            document.getElementById('otpForm').style.display = 'block';
            startOTPTimer();
        }

        // Handle Sign In
        function handleSignIn(e) {
            e.preventDefault();
            const email = document.getElementById('signInEmail').value;
            const password = document.getElementById('signInPassword').value;

            // Simulate login
            const btn = e.target.querySelector('button[type="submit"]');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Signing In...';
            btn.disabled = true;

            setTimeout(() => {
                // Check stored users
                const users = JSON.parse(localStorage.getItem('saarthiUsers') || '[]');
                const user = users.find(u => u.email === email && u.password === password);

                if (user || email === 'demo@saarthi.com') {
                    currentUser = user || { firstName: 'Demo', lastName: 'User', email: email };
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    
                    showToast('success', 'Welcome Back!', `Hello ${currentUser.firstName}!`);
                    updateUIForLoggedInUser();
                    closeAuthModal();
                } else {
                    showToast('error', 'Login Failed', 'Invalid email or password');
                }

                btn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Sign In';
                btn.disabled = false;
            }, 1500);
        }

        // Handle Sign Up
        function handleSignUp(e) {
            e.preventDefault();
            const firstName = document.getElementById('signUpFirstName').value;
            const lastName = document.getElementById('signUpLastName').value;
            const email = document.getElementById('signUpEmail').value;
            const phone = document.getElementById('signUpPhone').value;
            const password = document.getElementById('signUpPassword').value;
            const confirmPassword = document.getElementById('signUpConfirmPassword').value;

            if (password !== confirmPassword) {
                showToast('error', 'Password Mismatch', 'Passwords do not match');
                return;
            }

            if (password.length < 6) {
                showToast('error', 'Weak Password', 'Password must be at least 6 characters');
                return;
            }

            const btn = e.target.querySelector('button[type="submit"]');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Account...';
            btn.disabled = true;

            setTimeout(() => {
                // Store user
                const users = JSON.parse(localStorage.getItem('saarthiUsers') || '[]');
                
                if (users.find(u => u.email === email)) {
                    showToast('error', 'Email Exists', 'An account with this email already exists');
                    btn.innerHTML = '<i class="fas fa-user-plus"></i> Create Account';
                    btn.disabled = false;
                    return;
                }

                const newUser = { firstName, lastName, email, phone, password, createdAt: new Date().toISOString() };
                users.push(newUser);
                localStorage.setItem('saarthiUsers', JSON.stringify(users));

                showToast('success', 'Account Created!', 'Please verify your phone number');
                showOTPForm();

                btn.innerHTML = '<i class="fas fa-user-plus"></i> Create Account';
                btn.disabled = false;
            }, 1500);
        }

        // Handle Forgot Password
        function handleForgotPassword(e) {
            e.preventDefault();
            const email = document.getElementById('forgotEmail').value;

            const btn = e.target.querySelector('button[type="submit"]');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
            btn.disabled = true;

            setTimeout(() => {
                showToast('success', 'Email Sent!', 'Check your inbox for reset link');
                showSignIn();

                btn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Reset Link';
                btn.disabled = false;
            }, 1500);
        }

        // Handle OTP Verification
        function handleOTPVerification(e) {
            e.preventDefault();
            const otpInputs = document.querySelectorAll('.otp-input');
            let otp = '';
            otpInputs.forEach(input => otp += input.value);

            if (otp.length !== 6) {
                showToast('error', 'Invalid OTP', 'Please enter complete 6-digit OTP');
                return;
            }

            const btn = e.target.querySelector('button[type="submit"]');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';
            btn.disabled = true;

            setTimeout(() => {
                showToast('success', 'Verified!', 'Your account has been verified');
                
                // Auto login
                const users = JSON.parse(localStorage.getItem('saarthiUsers') || '[]');
                if (users.length > 0) {
                    currentUser = users[users.length - 1];
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    updateUIForLoggedInUser();
                }
                
                closeAuthModal();

                btn.innerHTML = '<i class="fas fa-check-circle"></i> Verify OTP';
                btn.disabled = false;
            }, 1500);
        }

        // OTP Timer
        let otpTimerInterval;
        function startOTPTimer() {
            let seconds = 30;
            const timerElement = document.getElementById('otpTimer');
            
            clearInterval(otpTimerInterval);
            otpTimerInterval = setInterval(() => {
                seconds--;
                timerElement.textContent = `Resend OTP in ${seconds}s`;
                
                if (seconds <= 0) {
                    clearInterval(otpTimerInterval);
                    timerElement.innerHTML = '<a href="#" onclick="resendOTP()">Resend OTP</a>';
                }
            }, 1000);
        }

        // Resend OTP
        function resendOTP() {
            showToast('success', 'OTP Sent!', 'New OTP has been sent to your phone');
            startOTPTimer();
        }

        // Move to next OTP input
        function moveToNext(current, index) {
            if (current.value.length === 1 && index < 6) {
                const inputs = document.querySelectorAll('.otp-input');
                if (inputs[index]) {
                    inputs[index].focus();
                }
            }
        }

        // Toggle Password Visibility
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const icon = event.currentTarget.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Password Strength Check
        document.addEventListener('DOMContentLoaded', function() {
            const passwordInput = document.getElementById('signUpPassword');
            if (passwordInput) {
                passwordInput.addEventListener('input', function() {
                    const strength = checkPasswordStrength(this.value);
                    const strengthBar = document.querySelector('.strength-bar');
                    const strengthText = document.querySelector('.strength-text');
                    
                    strengthBar.className = 'strength-bar ' + strength.class;
                    strengthText.textContent = strength.text;
                });
            }
        });

        function checkPasswordStrength(password) {
            if (password.length < 4) return { class: '', text: 'Password strength' };
            if (password.length < 6) return { class: 'weak', text: 'Weak password' };
            if (password.length < 8) return { class: 'medium', text: 'Medium strength' };
            return { class: 'strong', text: 'Strong password' };
        }

        // Social Login
        function socialLogin(provider) {
            showToast('info', 'Connecting...', `Connecting to ${provider}...`);
            
            setTimeout(() => {
                currentUser = {
                    firstName: 'Social',
                    lastName: 'User',
                    email: `user@${provider}.com`,
                    provider: provider
                };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                showToast('success', 'Welcome!', `Signed in with ${provider}`);
                updateUIForLoggedInUser();
                closeAuthModal();
            }, 1500);
        }

        // Update UI for logged in user
        function updateUIForLoggedInUser() {
            const navButtons = document.querySelector('.nav-buttons');
            if (currentUser && navButtons) {
                navButtons.innerHTML = `
                    <div class="user-menu">
                        <div class="user-avatar" onclick="toggleUserMenu()">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-dropdown" id="userDropdown">
                            <div class="user-info">
                                <strong>${currentUser.firstName} ${currentUser.lastName}</strong>
                                <span>${currentUser.email}</span>
                            </div>
                            <a href="#" onclick="showMyBookings()"><i class="fas fa-ticket-alt"></i> My Bookings</a>
                            <a href="#" onclick="showProfile()"><i class="fas fa-user-circle"></i> Profile</a>
                            <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                `;
            }
        }

        // Toggle User Menu
        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('show');
        }

        // Logout
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            
            const navButtons = document.querySelector('.nav-buttons');
            navButtons.innerHTML = `
                <a href="#" class="btn btn-outline" onclick="openAuthModal('signin')">Login</a>
                <a href="#" class="btn btn-primary" onclick="openAuthModal('signup')">Sign Up</a>
            `;
            
            showToast('success', 'Logged Out', 'You have been logged out successfully');
        }

        // Check for existing session
        document.addEventListener('DOMContentLoaded', function() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUIForLoggedInUser();
            }
        });

        // =============================================
        // BUS BOOKING SYSTEM FUNCTIONS
        // =============================================

        let bookingData = {
            from: '',
            to: '',
            date: '',
            selectedBus: null,
            selectedSeats: [],
            passengers: [],
            totalFare: 0,
            baseFare: 0,
            discount: 0
        };

        // Open Bus Booking Modal
        function openBusBookingModal(busName, busType, price, from, to) {
            bookingData.from = from || departureCity || 'Ahmedabad';
            bookingData.to = to || arrivalCity || 'Surat';
            bookingData.date = document.getElementById('travelDate').value || new Date().toISOString().split('T')[0];
            bookingData.baseFare = price || 400;

            document.getElementById('bookingFrom').textContent = bookingData.from;
            document.getElementById('bookingTo').textContent = bookingData.to;
            document.getElementById('bookingDate').textContent = formatDate(bookingData.date);

            document.getElementById('busBookingModal').classList.add('show');
            document.body.style.overflow = 'hidden';

            // Generate bus list
            generateBusList();
            goToStep(1);
        }

        // Close Bus Booking Modal
        function closeBusBookingModal() {
            document.getElementById('busBookingModal').classList.remove('show');
            document.body.style.overflow = 'auto';
            
            // Reset booking data
            bookingData = {
                from: '',
                to: '',
                date: '',
                selectedBus: null,
                selectedSeats: [],
                passengers: [],
                totalFare: 0,
                baseFare: 0,
                discount: 0
            };
        }

        // Go to booking step
        function goToStep(step) {
            // Hide all steps
            document.querySelectorAll('.booking-step').forEach(s => s.style.display = 'none');
            
            // Show current step
            const stepElement = document.getElementById('bookingStep' + step);
            if (stepElement) {
                stepElement.style.display = 'block';
            }

            // Update progress
            document.querySelectorAll('.progress-step').forEach((ps, index) => {
                ps.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    ps.classList.add('completed');
                } else if (index + 1 === step) {
                    ps.classList.add('active');
                }
            });

            // Special handling for each step
            if (step === 2) {
                generateSeats();
                updateSeatSummary();
            } else if (step === 3) {
                generatePassengerForms();
            } else if (step === 4) {
                updatePaymentSummary();
            }
        }

        // Generate Bus List
        function generateBusList() {
            const busListContainer = document.getElementById('busList');
            const buses = [
                { name: 'Gujarat Express', type: 'AC Sleeper', rating: 4.8, price: 450, departure: '06:00', arrival: '10:30', duration: '4h 30m', seats: 28, amenities: ['wifi', 'charging', 'water'] },
                { name: 'Narmada Travels', type: 'Volvo AC', rating: 4.6, price: 520, departure: '08:00', arrival: '12:00', duration: '4h', seats: 32, amenities: ['wifi', 'blanket', 'snacks'] },
                { name: 'Patel Tours', type: 'Non-AC Seater', rating: 4.2, price: 280, departure: '07:30', arrival: '12:30', duration: '5h', seats: 40, amenities: ['water'] },
                { name: 'Jay Gujarat', type: 'Semi-Sleeper', rating: 4.5, price: 380, departure: '09:00', arrival: '13:30', duration: '4h 30m', seats: 25, amenities: ['charging', 'water'] },
                { name: 'Shreeji Travels', type: 'AC Sleeper', rating: 4.7, price: 480, departure: '10:00', arrival: '14:30', duration: '4h 30m', seats: 22, amenities: ['wifi', 'charging', 'blanket', 'snacks'] },
                { name: 'Royal Cruiser', type: 'Luxury AC', rating: 4.9, price: 650, departure: '11:00', arrival: '15:00', duration: '4h', seats: 18, amenities: ['wifi', 'charging', 'blanket', 'snacks', 'entertainment'] }
            ];

            busListContainer.innerHTML = buses.map((bus, index) => `
                <div class="bus-card" data-index="${index}" onclick="selectBus(${index})">
                    <div class="bus-card-header">
                        <div class="bus-info">
                            <div class="bus-icon">
                                <i class="fas fa-bus"></i>
                            </div>
                            <div class="bus-details">
                                <h3>${bus.name}</h3>
                                <span class="bus-type-badge">${bus.type}</span>
                                <div class="bus-rating">
                                    <i class="fas fa-star"></i>
                                    <span>${bus.rating}</span>
                                </div>
                            </div>
                        </div>
                        <div class="bus-price">
                            <div class="price">${bus.price}</div>
                            <div class="per-seat">per seat</div>
                        </div>
                    </div>
                    <div class="bus-card-body">
                        <div class="bus-timing">
                            <div class="time-point">
                                <div class="time">${bus.departure}</div>
                                <div class="location">${bookingData.from}</div>
                            </div>
                            <div class="time-duration">
                                <div class="line"></div>
                                <span>${bus.duration}</span>
                            </div>
                            <div class="time-point">
                                <div class="time">${bus.arrival}</div>
                                <div class="location">${bookingData.to}</div>
                            </div>
                        </div>
                        <div class="bus-amenities">
                            ${bus.amenities.includes('wifi') ? '<div class="amenity"><i class="fas fa-wifi"></i><span>WiFi</span></div>' : ''}
                            ${bus.amenities.includes('charging') ? '<div class="amenity"><i class="fas fa-plug"></i><span>Charging</span></div>' : ''}
                            ${bus.amenities.includes('blanket') ? '<div class="amenity"><i class="fas fa-blanket"></i><span>Blanket</span></div>' : ''}
                            ${bus.amenities.includes('snacks') ? '<div class="amenity"><i class="fas fa-cookie"></i><span>Snacks</span></div>' : ''}
                        </div>
                        <div class="bus-seats-info">
                            <div class="seats-available">${bus.seats} seats</div>
                            <div>available</div>
                        </div>
                    </div>
                    <div class="bus-card-footer">
                        <div class="cancellation-policy">
                            <i class="fas fa-check-circle"></i>
                            Free cancellation before 6 hours
                        </div>
                        <button class="select-bus-btn" onclick="event.stopPropagation(); selectBus(${index})">
                            Select Seats <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            `).join('');

            // Store buses data
            window.busesData = buses;
        }

        // Filter Buses
        function filterBuses(type) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const cards = document.querySelectorAll('.bus-card');
            cards.forEach((card, index) => {
                const bus = window.busesData[index];
                const busType = bus.type.toLowerCase();
                
                if (type === 'all') {
                    card.style.display = 'block';
                } else if (type === 'ac' && busType.includes('ac') && !busType.includes('non-ac')) {
                    card.style.display = 'block';
                } else if (type === 'non-ac' && busType.includes('non-ac')) {
                    card.style.display = 'block';
                } else if (type === 'sleeper' && busType.includes('sleeper')) {
                    card.style.display = 'block';
                } else if (type === 'seater' && busType.includes('seater')) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Select Bus
        function selectBus(index) {
            bookingData.selectedBus = window.busesData[index];
            bookingData.baseFare = bookingData.selectedBus.price;
            bookingData.selectedSeats = [];

            document.querySelectorAll('.bus-card').forEach(card => card.classList.remove('selected'));
            document.querySelector(`.bus-card[data-index="${index}"]`).classList.add('selected');

            document.getElementById('selectedBusName').textContent = bookingData.selectedBus.name;
            document.getElementById('selectedBusType').textContent = bookingData.selectedBus.type;

            goToStep(2);
        }

        // Generate Seats
        function generateSeats() {
            const lowerDeck = document.getElementById('lowerDeck');
            const upperDeck = document.getElementById('upperDeck');

            // Generate random booked seats
            const bookedSeats = [];
            const numBooked = Math.floor(Math.random() * 15) + 5;
            for (let i = 0; i < numBooked; i++) {
                bookedSeats.push(Math.floor(Math.random() * 40) + 1);
            }

            // Ladies seats (random)
            const ladiesSeats = [5, 6, 25, 26];

            let lowerHTML = '';
            let upperHTML = '';

            // Lower deck (seats 1-20)
            for (let i = 1; i <= 20; i++) {
                const isBooked = bookedSeats.includes(i);
                const isLadies = ladiesSeats.includes(i);
                const isAisle = (i % 5 === 3);

                if (isAisle) {
                    lowerHTML += '<div class="seat aisle"></div>';
                }

                const seatClass = isBooked ? 'booked' : (isLadies ? 'ladies available' : 'available');
                const seatLabel = isBooked ? '' : `L${i}`;

                lowerHTML += `
                    <div class="seat ${seatClass}" data-seat="L${i}" onclick="${isBooked ? '' : `toggleSeat(this, 'L${i}')`}">
                        ${seatLabel}
                    </div>
                `;
            }

            // Upper deck (seats 21-40)
            for (let i = 21; i <= 40; i++) {
                const isBooked = bookedSeats.includes(i);
                const isLadies = ladiesSeats.includes(i);
                const isAisle = ((i - 20) % 5 === 3);

                if (isAisle) {
                    upperHTML += '<div class="seat aisle"></div>';
                }

                const seatClass = isBooked ? 'booked' : (isLadies ? 'ladies available' : 'available');
                const seatLabel = isBooked ? '' : `U${i - 20}`;

                upperHTML += `
                    <div class="seat ${seatClass}" data-seat="U${i - 20}" onclick="${isBooked ? '' : `toggleSeat(this, 'U${i - 20}')`}">
                        ${seatLabel}
                    </div>
                `;
            }

            lowerDeck.innerHTML = lowerHTML;
            upperDeck.innerHTML = upperHTML;
        }

        // Toggle Seat Selection
        function toggleSeat(element, seatId) {
            if (element.classList.contains('booked')) return;

            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                element.classList.add('available');
                bookingData.selectedSeats = bookingData.selectedSeats.filter(s => s !== seatId);
            } else {
                if (bookingData.selectedSeats.length >= 6) {
                    showToast('error', 'Maximum Seats', 'You can select maximum 6 seats');
                    return;
                }
                element.classList.remove('available');
                element.classList.add('selected');
                bookingData.selectedSeats.push(seatId);
            }

            updateSeatSummary();
        }

        // Update Seat Summary
        function updateSeatSummary() {
            const count = bookingData.selectedSeats.length;
            const farePerSeat = bookingData.baseFare;
            const totalFare = count * farePerSeat;

            document.getElementById('selectedSeatsDisplay').textContent = count > 0 ? bookingData.selectedSeats.join(', ') : 'None';
            document.getElementById('passengerCountDisplay').textContent = count;
            document.getElementById('farePerSeat').textContent = '' + farePerSeat;
            document.getElementById('totalFareDisplay').textContent = '' + totalFare;

            bookingData.totalFare = totalFare;

            const proceedBtn = document.getElementById('proceedToPassengers');
            proceedBtn.disabled = count === 0;
        }

        // Generate Passenger Forms
        function generatePassengerForms() {
            const container = document.getElementById('passengerForms');
            
            container.innerHTML = bookingData.selectedSeats.map((seat, index) => `
                <div class="passenger-form-card">
                    <div class="passenger-form-header">
                        <h4><i class="fas fa-user"></i> Passenger ${index + 1}</h4>
                        <span class="seat-badge">Seat: ${seat}</span>
                    </div>
                    <div class="passenger-form-row">
                        <div class="auth-input-group">
                            <label>Full Name</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-user"></i>
                                <input type="text" id="passengerName${index}" placeholder="Enter full name" required>
                            </div>
                        </div>
                        <div class="auth-input-group">
                            <label>Age</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-calendar"></i>
                                <input type="number" id="passengerAge${index}" placeholder="Age" min="1" max="120" required>
                            </div>
                        </div>
                        <div class="auth-input-group">
                            <label>Gender</label>
                            <div class="auth-input-wrapper">
                                <i class="fas fa-venus-mars"></i>
                                <select id="passengerGender${index}" required>
                                    <option value="">Select</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            // Pre-fill contact if logged in
            if (currentUser) {
                document.getElementById('contactEmail').value = currentUser.email || '';
                document.getElementById('contactPhone').value = currentUser.phone || '';
            }
        }

        // Update Payment Summary
        function updatePaymentSummary() {
            const baseFare = bookingData.baseFare * bookingData.selectedSeats.length;
            const gst = Math.round(baseFare * 0.05);
            const convFee = 20;
            const discount = bookingData.discount;
            const total = baseFare + gst + convFee - discount;

            document.getElementById('paymentFrom').textContent = bookingData.from;
            document.getElementById('paymentTo').textContent = bookingData.to;
            document.getElementById('paymentBusName').textContent = bookingData.selectedBus?.name || 'Gujarat Express';
            document.getElementById('paymentDate').textContent = formatDate(bookingData.date);
            document.getElementById('paymentSeats').textContent = bookingData.selectedSeats.join(', ');
            document.getElementById('paymentPassengers').textContent = bookingData.selectedSeats.length;
            document.getElementById('paymentBaseFare').textContent = '' + baseFare;
            document.getElementById('paymentGST').textContent = '' + gst;
            document.getElementById('paymentConvFee').textContent = '' + convFee;
            
            if (discount > 0) {
                document.getElementById('discountRow').style.display = 'flex';
                document.getElementById('paymentDiscount').textContent = '-' + discount;
            }
            
            document.getElementById('paymentTotal').textContent = '' + total;
            document.getElementById('finalPayBtn').innerHTML = `<i class="fas fa-lock"></i> Pay ${total} Securely`;

            bookingData.totalFare = total;
        }

        // Apply Coupon
        function applyCoupon() {
            const code = document.getElementById('couponCode').value.toUpperCase();
            
            if (code === 'FIRST50') {
                bookingData.discount = 50;
                showToast('success', 'Coupon Applied!', 'You saved 50');
            } else if (code === 'SAARTHI10') {
                bookingData.discount = Math.round(bookingData.totalFare * 0.1);
                showToast('success', 'Coupon Applied!', `You saved ${bookingData.discount}`);
            } else {
                showToast('error', 'Invalid Coupon', 'This coupon code is not valid');
                return;
            }

            updatePaymentSummary();
        }

        // Use Coupon Tag
        function useCoupon(code) {
            document.getElementById('couponCode').value = code;
            applyCoupon();
        }

        // Payment Section Toggle
        function togglePaymentSection(section) {
            const sectionBody = document.getElementById(section + 'Section');
            const allSections = ['upiSection', 'cardsSection', 'netbankingSection', 'walletsSection', 'emiSection', 'paylaterSection'];
            
            allSections.forEach(s => {
                const el = document.getElementById(s);
                if (el && s !== section + 'Section') {
                    el.style.display = 'none';
                }
            });

            if (sectionBody) {
                sectionBody.style.display = sectionBody.style.display === 'none' ? 'block' : 'none';
            }
        }

        // UPI App Selection
        function selectUPIApp(app) {
            document.querySelectorAll('.upi-app').forEach(btn => btn.classList.remove('selected'));
            event.target.closest('.upi-app').classList.add('selected');
            showToast('info', 'UPI Selected', `Payment via ${app.toUpperCase()}`);
        }

        // Verify UPI
        function verifyUPI() {
            const upiId = document.getElementById('upiIdInput').value;
            if (!upiId || !upiId.includes('@')) {
                showToast('error', 'Invalid UPI', 'Please enter a valid UPI ID');
                return;
            }
            showToast('success', 'UPI Verified', upiId + ' is valid');
        }

        // Bank Selection
        function selectBank(bank) {
            document.querySelectorAll('.bank-btn').forEach(btn => btn.classList.remove('selected'));
            if (event.target.closest('.bank-btn')) {
                event.target.closest('.bank-btn').classList.add('selected');
            }
            showToast('info', 'Bank Selected', bank.toUpperCase() + ' Net Banking');
        }

        // Wallet Selection
        function selectWallet(wallet) {
            document.querySelectorAll('.wallet-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.closest('.wallet-btn').classList.add('selected');
            showToast('info', 'Wallet Selected', wallet + ' Wallet');
        }

        // Pay Later Selection
        function selectPayLater(provider) {
            showToast('info', 'Pay Later', `Selected ${provider} Pay Later`);
        }

        // Format Card Number
        function formatCardNumber(input) {
            let value = input.value.replace(/\s/g, '').replace(/\D/g, '');
            let formatted = value.match(/.{1,4}/g)?.join(' ') || value;
            input.value = formatted;
        }

        // Format Expiry
        function formatExpiry(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2);
            }
            input.value = value;
        }

        // Process Booking Payment
        function processBookingPayment() {
            const payBtn = document.getElementById('finalPayBtn');
            payBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing Payment...';
            payBtn.disabled = true;

            setTimeout(() => {
                // Generate ticket
                const ticketId = 'SAARTHI-' + Math.random().toString(36).substr(2, 9).toUpperCase();
                
                document.getElementById('finalTicketId').textContent = ticketId;
                document.getElementById('finalTicketDate').textContent = formatDate(bookingData.date);
                document.getElementById('finalDepartureTime').textContent = bookingData.selectedBus?.departure || '06:00';
                document.getElementById('finalSeats').textContent = bookingData.selectedSeats.join(', ');
                document.getElementById('finalBusName').textContent = bookingData.selectedBus?.name || 'Gujarat Express';
                document.getElementById('finalAmount').textContent = '' + bookingData.totalFare;
                document.getElementById('ticketFromCode').textContent = bookingData.from.substring(0, 3).toUpperCase();
                document.getElementById('ticketFromCity').textContent = bookingData.from;
                document.getElementById('ticketToCode').textContent = bookingData.to.substring(0, 3).toUpperCase();
                document.getElementById('ticketToCity').textContent = bookingData.to;

                // Show success
                document.querySelectorAll('.booking-step').forEach(s => s.style.display = 'none');
                document.getElementById('bookingSuccess').style.display = 'block';

                // Update progress
                document.querySelectorAll('.progress-step').forEach(ps => ps.classList.add('completed'));

                showToast('success', 'Payment Successful!', 'Your ticket has been booked');

                payBtn.innerHTML = '<i class="fas fa-lock"></i> Pay Securely';
                payBtn.disabled = false;
            }, 3000);
        }

        // Download Ticket
        function downloadTicket() {
            showToast('success', 'Downloading...', 'Your ticket is being downloaded');
        }

        // Share Ticket
        function shareTicket() {
            if (navigator.share) {
                navigator.share({
                    title: 'SAARTHI Ticket',
                    text: `Bus ticket from ${bookingData.from} to ${bookingData.to}`,
                    url: window.location.href
                });
            } else {
                showToast('info', 'Share', 'Share feature not supported on this browser');
            }
        }

        // Format Date
        function formatDate(dateStr) {
            if (!dateStr) return 'Today';
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-IN', { weekday: 'short', day: 'numeric', month: 'short', year: 'numeric' });
        }

        // Update nav button handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Update Login button
            const loginBtn = document.querySelector('.btn-outline');
            if (loginBtn) {
                loginBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    openAuthModal('signin');
                });
            }

            // Update Sign Up button
            const signupBtn = document.querySelector('.btn-primary');
            if (signupBtn && signupBtn.textContent.includes('Sign Up')) {
                signupBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    openAuthModal('signup');
                });
            }

            // Update route card book buttons to open booking modal
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('btn-primary') && e.target.textContent.includes('Book Now')) {
                    e.preventDefault();
                    const card = e.target.closest('.route-card');
                    if (card) {
                        const busName = card.querySelector('.route-type-info h3')?.textContent;
                        const busType = card.querySelector('.route-type-info span')?.textContent;
                        const price = parseInt(card.querySelector('.price')?.textContent.replace('', '')) || 400;
                        openBusBookingModal(busName, busType, price);
                    } else {
                        openBusBookingModal();
                    }
                }
            });
        });

        // =============================================
        // LEAFLET MAP SYSTEM - GUJARAT SPECIFIC
        // =============================================

        // Gujarat boundaries
        const gujaratBounds = L.latLngBounds(
            L.latLng(20.0, 68.0),  // Southwest corner
            L.latLng(24.8, 74.5)   // Northeast corner
        );

        // Gujarat center
        const gujaratCenter = [22.2587, 71.1924];

        // Gujarat city coordinates (expanded)
        const cityCoordinates = {
            'Ahmedabad': [23.0225, 72.5714],
            'Surat': [21.1702, 72.8311],
            'Vadodara': [22.3072, 73.1812],
            'Rajkot': [22.3039, 70.8022],
            'Bhavnagar': [21.7645, 72.1519],
            'Jamnagar': [22.4707, 70.0577],
            'Junagadh': [21.5222, 70.4579],
            'Gandhinagar': [23.2156, 72.6369],
            'Anand': [22.5645, 72.9289],
            'Nadiad': [22.6916, 72.8634],
            'Morbi': [22.8173, 70.8378],
            'Surendranagar': [22.7277, 71.6480],
            'Bharuch': [21.7051, 72.9959],
            'Mehsana': [23.5880, 72.3693],
            'Bhuj': [23.2420, 69.6669],
            'Porbandar': [21.6417, 69.6293],
            'Palanpur': [24.1725, 72.4381],
            'Valsad': [20.5992, 72.9342],
            'Navsari': [20.9467, 72.9520],
            'Veraval': [20.9159, 70.3629],
            'Godhra': [22.7788, 73.6143],
            'Patan': [23.8493, 72.1266],
            'Gandhidham': [23.0753, 70.1337],
            'Dwarka': [22.2442, 68.9685],
            'Somnath': [20.8880, 70.4014],
            'Kutch': [23.7337, 69.8597],
            'Diu': [20.7144, 70.9874],
            'Saputara': [20.5744, 73.7463],
            'Gir': [21.1243, 70.7936],
            'Statue of Unity': [21.8380, 73.7191],
            'Amreli': [21.6012, 71.2204],
            'Botad': [22.1719, 71.6686],
            'Dahod': [22.8350, 74.2526],
            'Kheda': [22.7507, 72.6847],
            'Mahisagar': [23.1250, 73.6350],
            'Narmada': [21.8691, 73.4987],
            'Sabarkantha': [23.6255, 73.0543],
            'Tapi': [21.1167, 73.4833],
            'Valsad': [20.5992, 72.9342]
        };

        // Map variables
        let map = null;
        let routePolyline = null;
        let vehicleMarker = null;
        let startMarker = null;
        let endMarker = null;
        let currentRouteCoords = [];
        let vehiclePosition = 0;
        let isTracking = true;
        let trackingInterval = null;
        let currentMapLayer = 'default';
        let cityMarkers = [];
        let gujaratBoundaryLayer = null;

        // Custom styled map layers matching website colors
        const mapLayers = {
            default: L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                attribution: ' CARTO  OpenStreetMap',
                subdomains: 'abcd',
                maxZoom: 19
            }),
            light: L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                attribution: ' CARTO',
                subdomains: 'abcd'
            }),
            satellite: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                attribution: ' Esri'
            }),
            terrain: L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.png', {
                attribution: ' Stamen Design'
            }),
            dark: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                attribution: ' CARTO',
                subdomains: 'abcd'
            }),
            watercolor: L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg', {
                attribution: ' Stamen Design'
            })
        };

        // Gujarat boundary GeoJSON (simplified polygon)
        const gujaratGeoJSON = {
            "type": "Feature",
            "properties": {"name": "Gujarat"},
            "geometry": {
                "type": "Polygon",
                "coordinates": [[
                    [68.1, 20.1], [68.5, 21.0], [68.3, 22.0], [68.9, 23.0], [68.5, 23.8],
                    [69.5, 24.3], [70.5, 24.5], [71.5, 24.7], [72.5, 24.5], [73.5, 24.0],
                    [74.3, 23.5], [74.5, 22.5], [74.3, 21.5], [73.8, 20.5], [73.0, 20.1],
                    [72.0, 20.0], [71.0, 20.5], [70.0, 20.2], [69.0, 20.5], [68.1, 20.1]
                ]]
            }
        };

        // Initialize map restricted to Gujarat
        function initMap() {
            map = L.map('leafletMap', {
                center: gujaratCenter,
                zoom: 7,
                minZoom: 6,
                maxZoom: 15,
                maxBounds: gujaratBounds,
                maxBoundsViscosity: 1.0,
                zoomControl: false
            });

            // Add default styled layer
            mapLayers.default.addTo(map);

            // Add Gujarat boundary with website colors
            gujaratBoundaryLayer = L.geoJSON(gujaratGeoJSON, {
                style: {
                    color: '#FF6B35',
                    weight: 3,
                    opacity: 0.8,
                    fillColor: '#FF6B35',
                    fillOpacity: 0.03,
                    dashArray: '10, 5'
                }
            }).addTo(map);

            // Add major cities as small markers
            addMajorCityMarkers();

            // Set default route (Ahmedabad to Surat)
            setMapRoute('Ahmedabad', 'Surat');

            // Fit to Gujarat bounds
            map.fitBounds(gujaratBounds, { padding: [20, 20] });
        }

        // Add major city markers
        function addMajorCityMarkers() {
            const majorCities = ['Ahmedabad', 'Surat', 'Vadodara', 'Rajkot', 'Bhavnagar', 'Jamnagar', 'Gandhinagar', 'Bhuj'];
            
            majorCities.forEach(city => {
                if (cityCoordinates[city]) {
                    const marker = L.circleMarker(cityCoordinates[city], {
                        radius: 6,
                        fillColor: '#004E89',
                        color: '#ffffff',
                        weight: 2,
                        opacity: 1,
                        fillOpacity: 0.8
                    }).addTo(map);

                    marker.bindTooltip(city, {
                        permanent: false,
                        direction: 'top',
                        className: 'city-tooltip'
                    });

                    cityMarkers.push(marker);
                }
            });
        }

        // Show all cities on map
        function showAllCities() {
            // Clear existing city markers
            cityMarkers.forEach(marker => map.removeLayer(marker));
            cityMarkers = [];

            Object.entries(cityCoordinates).forEach(([city, coords]) => {
                const marker = L.circleMarker(coords, {
                    radius: 5,
                    fillColor: '#FF6B35',
                    color: '#ffffff',
                    weight: 2,
                    opacity: 1,
                    fillOpacity: 0.8
                }).addTo(map);

                marker.bindTooltip(city, {
                    permanent: false,
                    direction: 'top',
                    className: 'city-tooltip'
                });

                marker.on('click', function() {
                    if (!departureCity) {
                        document.getElementById('departureInput').value = city;
                        departureCity = city;
                        showToast('info', 'Departure Set', city + ' selected as departure');
                    } else if (!arrivalCity) {
                        document.getElementById('arrivalInput').value = city;
                        arrivalCity = city;
                        showToast('info', 'Destination Set', city + ' selected as destination');
                        setMapRoute(departureCity, arrivalCity);
                    }
                });

                cityMarkers.push(marker);
            });

            showToast('info', 'All Cities', 'Showing all Gujarat cities. Click to select.');
        }

        // Reset map to Gujarat view
        function resetToGujarat() {
            map.fitBounds(gujaratBounds, { padding: [20, 20] });
            showToast('info', 'View Reset', 'Map reset to Gujarat view');
        }

        // Set map route between two cities
        function setMapRoute(fromCity, toCity) {
            const from = cityCoordinates[fromCity] || cityCoordinates['Ahmedabad'];
            const to = cityCoordinates[toCity] || cityCoordinates['Surat'];

            // Update info overlay
            document.getElementById('mapFromCity').textContent = fromCity || 'Ahmedabad';
            document.getElementById('mapToCity').textContent = toCity || 'Surat';

            // Calculate distance (rough estimate)
            const distance = calculateDistance(from[0], from[1], to[0], to[1]);
            document.getElementById('mapDistance').textContent = `~${Math.round(distance)} km`;
            document.getElementById('mapDuration').textContent = `~${Math.round(distance / 60)} hrs`;

            // Clear existing markers and route
            if (routePolyline) map.removeLayer(routePolyline);
            if (vehicleMarker) map.removeLayer(vehicleMarker);
            if (startMarker) map.removeLayer(startMarker);
            if (endMarker) map.removeLayer(endMarker);

            // Generate route points (curved path for realism)
            currentRouteCoords = generateCurvedRoute(from, to, 50);

            // Create route polyline with gradient effect
            routePolyline = L.polyline(currentRouteCoords, {
                color: '#FF6B35',
                weight: 5,
                opacity: 0.8,
                dashArray: '10, 10',
                lineCap: 'round',
                lineJoin: 'round'
            }).addTo(map);

            // Custom icons
            const startIcon = L.divIcon({
                html: '<div style="font-size: 2.5rem; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3));"></div>',
                className: 'custom-marker-icon',
                iconSize: [40, 40],
                iconAnchor: [20, 40]
            });

            const endIcon = L.divIcon({
                html: '<div style="font-size: 2.5rem; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.3));"></div>',
                className: 'custom-marker-icon',
                iconSize: [40, 40],
                iconAnchor: [20, 40]
            });

            const vehicleIcon = L.divIcon({
                html: '<div class="vehicle-marker-icon"></div>',
                className: 'custom-marker-icon',
                iconSize: [40, 40],
                iconAnchor: [20, 20]
            });

            // Add markers
            startMarker = L.marker(from, { icon: startIcon })
                .addTo(map)
                .bindPopup(`<strong> Departure</strong><br>${fromCity}<br><small>Starting Point</small>`);

            endMarker = L.marker(to, { icon: endIcon })
                .addTo(map)
                .bindPopup(`<strong> Destination</strong><br>${toCity}<br><small>End Point</small>`);

            vehicleMarker = L.marker(currentRouteCoords[0], { icon: vehicleIcon })
                .addTo(map)
                .bindPopup('<strong> Gujarat Express</strong><br>Currently en route<br><small>Click to track</small>');

            // Fit map to route bounds with padding
            const bounds = L.latLngBounds([from, to]);
            map.fitBounds(bounds, { padding: [50, 50] });

            // Start vehicle animation
            vehiclePosition = 0;
            if (isTracking) {
                startVehicleAnimation();
            }
        }

        // Generate curved route points
        function generateCurvedRoute(start, end, numPoints) {
            const points = [];
            const midLat = (start[0] + end[0]) / 2;
            const midLng = (start[1] + end[1]) / 2;
            
            // Add some curve offset
            const curveOffset = (Math.random() - 0.5) * 0.3;
            const controlLat = midLat + curveOffset;
            const controlLng = midLng + curveOffset;

            for (let i = 0; i <= numPoints; i++) {
                const t = i / numPoints;
                // Quadratic bezier curve
                const lat = Math.pow(1-t, 2) * start[0] + 2 * (1-t) * t * controlLat + Math.pow(t, 2) * end[0];
                const lng = Math.pow(1-t, 2) * start[1] + 2 * (1-t) * t * controlLng + Math.pow(t, 2) * end[1];
                points.push([lat, lng]);
            }

            return points;
        }

        // Calculate distance between two points (Haversine formula)
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Earth's radius in km
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // Start vehicle animation
        function startVehicleAnimation() {
            if (trackingInterval) clearInterval(trackingInterval);
            
            trackingInterval = setInterval(() => {
                if (!isTracking || !vehicleMarker || currentRouteCoords.length === 0) return;

                vehiclePosition = (vehiclePosition + 1) % currentRouteCoords.length;
                const newPos = currentRouteCoords[vehiclePosition];
                vehicleMarker.setLatLng(newPos);

                // Calculate rotation based on direction
                if (vehiclePosition < currentRouteCoords.length - 1) {
                    const nextPos = currentRouteCoords[vehiclePosition + 1];
                    const angle = Math.atan2(nextPos[1] - newPos[1], nextPos[0] - newPos[0]) * 180 / Math.PI;
                    
                    // Update vehicle icon rotation
                    const iconHtml = `<div class="vehicle-marker-icon" style="transform: rotate(${angle}deg);"></div>`;
                    vehicleMarker.setIcon(L.divIcon({
                        html: iconHtml,
                        className: 'custom-marker-icon',
                        iconSize: [40, 40],
                        iconAnchor: [20, 20]
                    }));
                }

                // Update progress in popup
                const progress = Math.round((vehiclePosition / currentRouteCoords.length) * 100);
                vehicleMarker.setPopupContent(`<strong> Gujarat Express</strong><br>Journey Progress: ${progress}%<br><small>Live tracking enabled</small>`);

            }, 200); // Update every 200ms
        }

        // Map control functions
        function mapZoomIn() {
            if (map) map.zoomIn(1);
        }

        function mapZoomOut() {
            if (map) map.zoomOut(1);
        }

        function mapFitRoute() {
            if (map && routePolyline) {
                map.fitBounds(routePolyline.getBounds(), { padding: [50, 50] });
            }
        }

        function centerOnVehicle() {
            if (map && vehicleMarker) {
                map.setView(vehicleMarker.getLatLng(), 12);
                vehicleMarker.openPopup();
            }
        }

        function toggleMapLayer() {
            const layers = ['streets', 'satellite', 'terrain', 'dark'];
            const currentIndex = layers.indexOf(currentMapLayer);
            const nextIndex = (currentIndex + 1) % layers.length;
            currentMapLayer = layers[nextIndex];

            // Remove current layer and add new one
            Object.values(mapLayers).forEach(layer => {
                if (map.hasLayer(layer)) map.removeLayer(layer);
            });
            mapLayers[currentMapLayer].addTo(map);

            showToast('info', 'Map Style Changed', `Switched to ${currentMapLayer} view`);
        }

        function toggleTracking() {
            isTracking = !isTracking;
            const btn = document.getElementById('trackingBtn');
            const statusEl = document.getElementById('trackingStatus');

            if (isTracking) {
                btn.innerHTML = '<i class="fas fa-pause"></i>';
                statusEl.innerHTML = '<div class="pulse"></div><span>Live Tracking Active</span>';
                startVehicleAnimation();
                showToast('success', 'Tracking Started', 'Vehicle tracking is now active');
            } else {
                btn.innerHTML = '<i class="fas fa-play"></i>';
                statusEl.innerHTML = '<span style="color: #888;">Tracking Paused</span>';
                if (trackingInterval) clearInterval(trackingInterval);
                showToast('info', 'Tracking Paused', 'Vehicle tracking paused');
            }
        }

        // Update map when route is selected
        function updateMapForRoute(fromCity, toCity) {
            if (!map) {
                // Wait for map to initialize
                setTimeout(() => updateMapForRoute(fromCity, toCity), 500);
                return;
            }
            setMapRoute(fromCity, toCity);
        }

        // Initialize map when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize map after a short delay to ensure container is ready
            setTimeout(() => {
                initMap();
            }, 100);
        });

        // Add user menu styles dynamically
        const userMenuStyles = document.createElement('style');
        userMenuStyles.textContent = `
            .user-menu {
                position: relative;
            }
            .user-avatar {
                width: 45px;
                height: 45px;
                background: var(--gradient-1);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                cursor: pointer;
                transition: all 0.3s;
            }
            .user-avatar:hover {
                transform: scale(1.05);
            }
            .user-dropdown {
                position: absolute;
                top: 100%;
                right: 0;
                background: white;
                border-radius: 16px;
                box-shadow: 0 10px 40px rgba(0,0,0,0.2);
                min-width: 250px;
                padding: 15px 0;
                opacity: 0;
                visibility: hidden;
                transform: translateY(10px);
                transition: all 0.3s;
                z-index: 100;
            }
            .user-dropdown.show {
                opacity: 1;
                visibility: visible;
                transform: translateY(5px);
            }
            .user-info {
                padding: 15px 20px;
                border-bottom: 1px solid #f0f0f0;
            }
            .user-info strong {
                display: block;
                font-size: 1.1rem;
                color: var(--dark);
            }
            .user-info span {
                font-size: 0.85rem;
                color: #888;
            }
            .user-dropdown a {
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 12px 20px;
                color: var(--dark);
                text-decoration: none;
                transition: all 0.3s;
            }
            .user-dropdown a:hover {
                background: rgba(255,107,53,0.1);
                color: var(--primary);
            }
            .user-dropdown a i {
                width: 20px;
                color: var(--primary);
            }
        `;
        document.head.appendChild(userMenuStyles);
    </script>
</body>
</html>
